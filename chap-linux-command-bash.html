<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>附录 A 命令行操作 | R 语言学习笔记</title>
<meta name="author" content="黄湘云">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="附录 A 命令行操作 | R 语言学习笔记">
<meta property="og:type" content="book">
<meta property="og:image" content="/images/cover.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="附录 A 命令行操作 | R 语言学习笔记">
<meta name="twitter:image" content="/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap/bootstrap.bundle.min.js"></script><script src="libs/bs3compat/transition.js"></script><script src="libs/bs3compat/tabs.js"></script><script src="libs/bs3compat/bs3compat.js"></script><link href="libs/bs4_book/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book/bs4_book.js"></script><script src="libs/htmlwidgets/htmlwidgets.js"></script><script src="libs/plotly-binding/plotly.js"></script><script src="libs/typedarray/typedarray.min.js"></script><link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main/plotly-latest.min.js"></script><script src="libs/plotly-locale-zh-CN/zh-cn.js"></script><script src="libs/mathjax/cdn.js"></script><script src="libs/echarts4r/echarts-en.min.js"></script><script src="libs/echarts4r/ecStat.min.js"></script><script src="libs/echarts4r/dataTool.min.js"></script><script src="libs/echarts4r-binding/echarts4r.js"></script><script src="libs/d3/d3.min.js"></script><script src="libs/forceNetwork-binding/forceNetwork.js"></script><link href="libs/vis/vis-network.min.css" rel="stylesheet">
<script src="libs/vis/vis-network.min.js"></script><script src="libs/visNetwork-binding/visNetwork.js"></script><script src="libs/FileSaver/FileSaver.min.js"></script><script src="libs/Blob/Blob.js"></script><script src="libs/canvas-toBlob/canvas-toBlob.js"></script><script src="libs/html2canvas/html2canvas.js"></script><script src="libs/jspdf/jspdf.debug.js"></script><link href="libs/jquery-sparkline/jquery.sparkline.css" rel="stylesheet">
<script src="libs/jquery-sparkline/jquery.sparkline.js"></script><script src="libs/sparkline-binding/sparkline.js"></script><script src="libs/r2d3-render/r2d3-render.js"></script><script src="libs/webcomponents/webcomponents.js"></script><script src="libs/r2d3-binding/r2d3.js"></script><script src="libs/d3v6/d3.min.js"></script><script src="libs/kePrint/kePrint.js"></script><link href="libs/lightable/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-54GQKWF7VP"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-54GQKWF7VP');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
<meta name="description" content="Bash 文件查找、查看（内容、大小）、移动（重命名）、删除、创建、修改权限 Linux 命令行工具是非常强大的，命令行中的数据科学 https://www.datascienceatthecommandline.com/，Linux 命令行 https://github.com/jaywcjlove/linux-command optparse、docopt 、littler...">
<meta property="og:description" content="Bash 文件查找、查看（内容、大小）、移动（重命名）、删除、创建、修改权限 Linux 命令行工具是非常强大的，命令行中的数据科学 https://www.datascienceatthecommandline.com/，Linux 命令行 https://github.com/jaywcjlove/linux-command optparse、docopt 、littler...">
<meta name="twitter:description" content="Bash 文件查找、查看（内容、大小）、移动（重命名）、删除、创建、修改权限 Linux 命令行工具是非常强大的，命令行中的数据科学 https://www.datascienceatthecommandline.com/，Linux 命令行 https://github.com/jaywcjlove/linux-command optparse、docopt 、littler...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R 语言学习笔记</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">欢迎</a></li>
<li><a class="" href="chap-preface.html"><span class="header-section-number">1</span> 前言</a></li>
<li class="book-part">数据整理</li>
<li><a class="" href="chap-data-wrangling.html">介绍</a></li>
<li><a class="" href="chap-data-structure.html"><span class="header-section-number">2</span> 数据结构</a></li>
<li><a class="" href="chap-data-transportation.html"><span class="header-section-number">3</span> 数据搬运</a></li>
<li><a class="" href="chap-string-operations.html"><span class="header-section-number">4</span> 字符串操作</a></li>
<li><a class="" href="chap-regular-expressions.html"><span class="header-section-number">5</span> 正则表达式</a></li>
<li><a class="" href="chap-data-manipulation.html"><span class="header-section-number">6</span> 数据操作</a></li>
<li><a class="" href="chap-advanced-manipulation.html"><span class="header-section-number">7</span> 高级数据操作</a></li>
<li><a class="" href="chap-parallel-manipulation.html"><span class="header-section-number">8</span> 并行化操作</a></li>
<li><a class="" href="chap-dplyr-manipulation.html"><span class="header-section-number">9</span> 净土化操作</a></li>
<li class="book-part">统计图形</li>
<li><a class="" href="chap-statistical-graphics.html">介绍</a></li>
<li><a class="" href="chap-graphics-foundations.html"><span class="header-section-number">10</span> 图形基础</a></li>
<li><a class="" href="chap-data-visualization.html"><span class="header-section-number">11</span> 数据可视化</a></li>
<li><a class="" href="chap-interactive-web-graphics.html"><span class="header-section-number">12</span> 交互图形</a></li>
<li class="book-part">统计计算</li>
<li><a class="" href="chap-statistical-computation.html">介绍</a></li>
<li><a class="" href="chap-numerical-optimization.html"><span class="header-section-number">13</span> 数值优化</a></li>
<li><a class="" href="chap-differential-equations.html"><span class="header-section-number">14</span> 微分方程</a></li>
<li class="book-part">附录</li>
<li><a class="active" href="chap-linux-command-bash.html"><span class="header-section-number">A</span> 命令行操作</a></li>
<li><a class="" href="references.html">参考文献</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/XiangyunHuang/notesdown">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="chap-linux-command-bash" class="section level1" number="15">
<h1>
<span class="header-section-number">附录 A</span> 命令行操作<a class="anchor" aria-label="anchor" href="#chap-linux-command-bash"><i class="fas fa-link"></i></a>
</h1>
<!-- 提供一个表格左边 R 命令函数，右边系统命令 -->
<p>Bash 文件查找、查看（内容、大小）、移动（重命名）、删除、创建、修改权限</p>
<p>Linux 命令行工具是非常强大的，命令行中的数据科学 <a href="https://www.datascienceatthecommandline.com/" class="uri">https://www.datascienceatthecommandline.com/</a>，Linux 命令行 <a href="https://github.com/jaywcjlove/linux-command" class="uri">https://github.com/jaywcjlove/linux-command</a></p>
<p><a href="https://github.com/trevorld/r-optparse">optparse</a>、<a href="https://github.com/docopt/docopt.R">docopt</a> 、<a href="https://github.com/eddelbuettel/littler">littler</a> 包提供了很多便捷的命令行工具，<a href="https://github.com/jeroen/sys">sys</a>， <a href="https://github.com/r-lib/fs">fs</a> 在 R 中运行操作系统命令</p>
<p>如表<a href="chap-linux-command-bash.html#tab:r-vs-shell">A.1</a>所示，总结了 R 和 Shell 命令的等价表示，下面以 <code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code> 和 <code>ls</code> 为例，介绍其等价的内容</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:r-vs-shell">表 A.1: </span> R 和 Shell 命令的等价表示 <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;CentOS 系统默认没有安装 tree 软件，需要先安装才能使用此命令 &lt;code&gt;sudo dnf install -y tree&lt;/code&gt;&lt;/p&gt;"><sup>50</sup></a>
</caption>
<thead><tr class="header">
<th align="left"></th>
<th>R</th>
<th align="left">Shell</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">查看文件</td>
<td><code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code></td>
<td align="left"><code>ls</code></td>
</tr>
<tr class="even">
<td align="left">查看目录</td>
<td><code><a href="https://rdrr.io/r/base/list.files.html">list.dirs()</a></code></td>
<td align="left"><code>dir</code></td>
</tr>
<tr class="odd">
<td align="left">目录层次</td>
<td><code><a href="https://fs.r-lib.org/reference/dir_tree.html">fs::dir_tree()</a></code></td>
<td align="left"><code>tree</code></td>
</tr>
</tbody>
</table></div>
<div id="sec-ls" class="section level2" number="15.1">
<h2>
<span class="header-section-number">A.1</span> 查看文件<a class="anchor" aria-label="anchor" href="#sec-ls"><i class="fas fa-link"></i></a>
</h2>
<p><code>ls</code>/<code>mkdir</code>/<code>mv</code>/<code>du</code></p>
<p>查看文件</p>
<pre><code>```bash
ls -a
```

列出目录下所有文件

```bash
ls -1 
```

一行显示一个文件或文件夹

```bash
ls -l 
```

按从 aA-zZ 的顺序列出所有文件以及所属权限

```bash
ls -rl 
```

相比于 `ls -l` 文件是逆序排列

```bash
ls -lh
```

列出文件或文件夹（不包含子文件夹）的大小 

```bash
ls -ld 
```

列出当前目录本身，而不是其所包含的内容</code></pre>
</div>
<div id="sec-mkdir" class="section level2" number="15.2">
<h2>
<span class="header-section-number">A.2</span> 创建文件夹<a class="anchor" aria-label="anchor" href="#sec-mkdir"><i class="fas fa-link"></i></a>
</h2>
<pre><code>```bash
mkdir images
```

创建文件用 `touch` 如 `touch .Rprofile` 

```bash
# 删除文件夹及子文件夹，递归删除
rm -rf images/
# 删除文件
rm .Rprofile
```</code></pre>
</div>
<div id="sec-mv" class="section level2" number="15.3">
<h2>
<span class="header-section-number">A.3</span> 移动文件<a class="anchor" aria-label="anchor" href="#sec-mv"><i class="fas fa-link"></i></a>
</h2>
<pre><code>在当前目录下

```bash
# 移动文件夹 images 下的所有文件到 figures 文件夹下
mv images/* figures/
# images 文件夹移动到 figures 文件夹下
mv images/ figures/
# 移动特定的文件
mv images/*.png figures/
```

同一目录下有两个文件 `R-3.5.1.tar.gz` 未下载完整 和 `R-3.5.1.tar.gz.1` 完全下载

```bash
# 删除 R-3.5.1.tar.gz
rm R-3.5.1.tar.gz
# 重命名 R-3.5.1.tar.gz.1 
mv R-3.5.1.tar.gz.1  R-3.5.1.tar.gz
```</code></pre>
</div>
<div id="sec-du" class="section level2" number="15.4">
<h2>
<span class="header-section-number">A.4</span> 查看文件大小<a class="anchor" aria-label="anchor" href="#sec-du"><i class="fas fa-link"></i></a>
</h2>
<pre><code>当前目录下各文件夹的大小， `-h` 表示人类（相对于机器来说）可读的方式显示，如 Kb、Mb、Gb，`-d` 表示目录深度 `du --human-readable --max-depth=1 ./`

```bash
du -h -d 1 ./
```

```bash
# 对当前目录下的文件/夹 按大小排序
du -sh * | sort -nr
```</code></pre>
</div>
<div id="sec-shell" class="section level2" number="15.5">
<h2>
<span class="header-section-number">A.5</span> 终端模拟器<a class="anchor" aria-label="anchor" href="#sec-shell"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://ohmyz.sh/">oh-my-zsh</a> 是 <a href="https://www.zsh.org/">Z Shell</a> 扩展，开发在 Github 上 <a href="https://github.com/ohmyzsh/ohmyzsh" class="uri">https://github.com/ohmyzsh/ohmyzsh</a>。</p>
<p>zsh 相比于 bash， 在语法高亮、自动补全等方面有优势</p>
<div class="sourceCode" id="cb1909"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1909-1"><a href="chap-linux-command-bash.html#cb1909-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> zsh</span>
<span id="cb1909-2"><a href="chap-linux-command-bash.html#cb1909-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sh</span> <span class="at">-c</span> <span class="st">"</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-fsSL</span> https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="va">)</span><span class="st">"</span></span></code></pre></div>
<p>RStudio 集成的终端支持 Zsh，操作路径 Tools -&gt; Global Options -&gt; Terminal， 见图 <a href="chap-linux-command-bash.html#fig:zsh-rstudio">A.1</a></p>
<div class="figure">
<span style="display:block;" id="fig:zsh-rstudio"></span>
<img src="screenshots/zsh-rstudio.png" style="width:75.0%" alt=""><p class="caption">图 A.1:  RStudio IDE 集成的 Zsh 终端模拟器</p>
</div>
</div>
<div id="sec-tar" class="section level2" number="15.6">
<h2>
<span class="header-section-number">A.6</span> 压缩和解压缩<a class="anchor" aria-label="anchor" href="#sec-tar"><i class="fas fa-link"></i></a>
</h2>
<p>最常见的压缩文件格式有 <code>.tar</code>、<code>.tar.gz</code>、<code>.tar.bz2</code>、<code>.zip</code> 和 <code>.rar</code>，分别对应于 Tar <a href="https://www.gnu.org/software/tar/" class="uri">https://www.gnu.org/software/tar/</a>、 Gzip <a href="https://www.gzip.org/" class="uri">https://www.gzip.org/</a> 、 Bzip2 <a href="https://www.bzip.org/" class="uri">https://www.bzip.org/</a> 、 UnZip/Zip <a href="http://www.info-zip.org" class="uri">http://www.info-zip.org</a> 和 WinRAR <a href="https://www.rarlab.com/" class="uri">https://www.rarlab.com/</a>。 Tar 提供了基本的打包和解包工具，Gzip 和 Bzip2 在 Tar 打包的基础上提供了压缩功能， UnZip/Zip 是兼容 Windows 原生压缩/解压缩功能的程序，WinRAR 是广泛流行于 Windows 系统的压缩/解压缩收费软件，除了 WinRAR，其它都是免费甚至开源软件。 下面以 <code>.tar.gz</code> 和<code>.tar.bz2</code> 两种格式的压缩文件为例，介绍文件压缩和解压缩的操作，其它文件格式的操作类似<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;zip 格式的文件需要额外安装 zip 和 unzip 两款软件实现压缩和解压缩。&lt;/p&gt;"><sup>51</sup></a>。WinRAR <a href="https://www.rarlab.com/" class="uri">https://www.rarlab.com/</a> 是收费的压缩和解压缩工具，也支持 Linux 和 macOS 系统，鉴于它是收费软件，这里就不多展开介绍了，详情请见官网。</p>
<div class="columns">
<div class="column" style="width:47.5%;">
<div class="sourceCode" id="cb1910"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1910-1"><a href="chap-linux-command-bash.html#cb1910-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> tar gzip zip unzip </span>
<span id="cb1910-2"><a href="chap-linux-command-bash.html#cb1910-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 将目录 ~/tmp 压缩成文件 filename.tar.gz</span></span>
<span id="cb1910-3"><a href="chap-linux-command-bash.html#cb1910-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-czf</span> <span class="pp">**</span>.tar.gz ~/tmp</span>
<span id="cb1910-4"><a href="chap-linux-command-bash.html#cb1910-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 将文件 filename.tar.gz 解压到目录 ~/tmp</span></span>
<span id="cb1910-5"><a href="chap-linux-command-bash.html#cb1910-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xzf</span> <span class="pp">**</span>.tar.gz <span class="at">-C</span> ~/tmp</span></code></pre></div>
</div>
<div class="column" style="width:5%;">
<p> 
<!-- an empty Div (with a white space), serving as
a column separator --></p>
</div>
<div class="column" style="width:47.5%;">
<div class="sourceCode" id="cb1911"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1911-1"><a href="chap-linux-command-bash.html#cb1911-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> bzip2</span>
<span id="cb1911-2"><a href="chap-linux-command-bash.html#cb1911-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 将目录 ~/tmp 压缩成文件 filename.tar.bz2</span></span>
<span id="cb1911-3"><a href="chap-linux-command-bash.html#cb1911-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-cjf</span> filename.tar.bz2 ~/tmp</span>
<span id="cb1911-4"><a href="chap-linux-command-bash.html#cb1911-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 将文件 filename.tar.bz2 解压到目录 ~/tmp</span></span>
<span id="cb1911-5"><a href="chap-linux-command-bash.html#cb1911-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xjf</span> filename.tar.bz2 <span class="at">-C</span> ~/tmp</span></code></pre></div>
</div>
</div>
<p>解压不带 tar 的 .gz 文件，比如 <a href="http://www-cs-faculty.stanford.edu/~knuth/tex.eps.gz">tex.eps.gz</a> 解压后变成 tex.eps</p>
<div class="sourceCode" id="cb1912"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1912-1"><a href="chap-linux-command-bash.html#cb1912-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gzip</span> filename.gz <span class="at">-d</span> ~/tmp</span></code></pre></div>
</div>
<div id="repo-install" class="section level2" number="15.7">
<h2>
<span class="header-section-number">A.7</span> 从仓库安装 R<a class="anchor" aria-label="anchor" href="#repo-install"><i class="fas fa-link"></i></a>
</h2>
<div id="ubuntu" class="section level3" number="15.7.1">
<h3>
<span class="header-section-number">A.7.1</span> Ubuntu<a class="anchor" aria-label="anchor" href="#ubuntu"><i class="fas fa-link"></i></a>
</h3>
<p>安装 openssh zsh 和 Git</p>
<div class="sourceCode" id="cb1913"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1913-1"><a href="chap-linux-command-bash.html#cb1913-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install zsh openssh-server</span>
<span id="cb1913-2"><a href="chap-linux-command-bash.html#cb1913-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:git-core/ppa</span>
<span id="cb1913-3"><a href="chap-linux-command-bash.html#cb1913-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt install git</span>
<span id="cb1913-4"><a href="chap-linux-command-bash.html#cb1913-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sh</span> <span class="at">-c</span> <span class="st">"</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-fsSL</span> https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="va">)</span><span class="st">"</span></span></code></pre></div>
<p>只考虑最新的 Ubuntu 18.04 因为本书写成的时候，该版本应该已经大规模使用了，默认版本的安装和之前版本的安装就不再展示了。安装最新版 R-3.5.x，无论安装哪个版本，都要先导入密钥</p>
<div class="sourceCode" id="cb1914"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1914-1"><a href="chap-linux-command-bash.html#cb1914-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-key adv <span class="at">--keyserver</span> hkp://keyserver.ubuntu.com:80 <span class="at">--recv</span> E084DAB9</span></code></pre></div>
<ul>
<li>
<p>Ubuntu 14.04.5 提供的默认版本 R 3.0.2，安装 R 3.5.x 系列之前的版本，如 R 3.4.4</p>
<div class="sourceCode" id="cb1915"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1915-1"><a href="chap-linux-command-bash.html#cb1915-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">"deb http://cran.rstudio.com/bin/linux/ubuntu </span><span class="kw">`</span><span class="ex">lsb_release</span> <span class="at">-cs</span><span class="kw">`</span><span class="st">/"</span></span>
<span id="cb1915-2"><a href="chap-linux-command-bash.html#cb1915-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-base-dev</span></code></pre></div>
<p>添加完仓库后，都需要更新源<code>sudo apt-get update</code>，安装 R 3.5.x 系列最新版</p>
<div class="sourceCode" id="cb1916"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1916-1"><a href="chap-linux-command-bash.html#cb1916-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">"deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu trusty-cran35/"</span></span></code></pre></div>
</li>
<li>
<p>Ubuntu 16.04.5 提供的默认版本 R 3.4.4，这是 R 3.4.x 系列的最新版，安装目前最新的 R 3.5.x 版本需要</p>
<div class="sourceCode" id="cb1917"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1917-1"><a href="chap-linux-command-bash.html#cb1917-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">"deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu xenial-cran35/"</span></span></code></pre></div>
</li>
<li>
<p>Ubuntu 18.04.1 提供的默认版本 R 3.4.4，安装目前的最新版本需要</p>
<div class="sourceCode" id="cb1918"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1918-1"><a href="chap-linux-command-bash.html#cb1918-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">"deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu bionic-cran35/"</span></span></code></pre></div>
<p>接下来安装 R，详细安装指导见 <a href="https://cran.r-project.org/bin/linux/debian/index.html">CRAN 官网</a>。</p>
<div class="sourceCode" id="cb1919"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1919-1"><a href="chap-linux-command-bash.html#cb1919-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-base-dev</span></code></pre></div>
<p>Michael Rutter 维护了编译好的二进制版本 <a href="https://launchpad.net/~marutter" class="uri">https://launchpad.net/~marutter</a>，比如 rstan 包可以通过安装 r-cran-rstan 完成</p>
<div class="sourceCode" id="cb1920"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1920-1"><a href="chap-linux-command-bash.html#cb1920-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R packages for Ubuntu LTS. Based on CRAN Task Views.</span></span>
<span id="cb1920-2"><a href="chap-linux-command-bash.html#cb1920-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:marutter/c2d4u3.5</span>
<span id="cb1920-3"><a href="chap-linux-command-bash.html#cb1920-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-cran-rstan</span></code></pre></div>
</li>
</ul>
</div>
<div id="centos" class="section level3" number="15.7.2">
<h3>
<span class="header-section-number">A.7.2</span> CentOS<a class="anchor" aria-label="anchor" href="#centos"><i class="fas fa-link"></i></a>
</h3>
<p>同样适用于 Fedora</p>
<p>安装指导<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;在 CentOS 7 上打造 R 语言编程环境&lt;/p&gt;"><sup>52</sup></a></p>
</div>
</div>
<div id="source-install" class="section level2" number="15.8">
<h2>
<span class="header-section-number">A.8</span> 源码安装<a class="anchor" aria-label="anchor" href="#source-install"><i class="fas fa-link"></i></a>
</h2>
<div id="ubuntu-1" class="section level3" number="15.8.1">
<h3>
<span class="header-section-number">A.8.1</span> Ubuntu<a class="anchor" aria-label="anchor" href="#ubuntu-1"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>首先启用源码仓库，否则执行 <code>sudo apt-get build-dep r-base</code> 会报如下错误</li>
</ol>
<pre><code>E: You must put some 'source' URIs in your sources.list</code></pre>
<div class="sourceCode" id="cb1922"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1922-1"><a href="chap-linux-command-bash.html#cb1922-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> sed <span class="at">-i</span> <span class="at">--</span> <span class="st">'s/#deb-src/deb-src/g'</span> /etc/apt/sources.list <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> sed <span class="at">-i</span> <span class="at">--</span> <span class="st">'s/# deb-src/deb-src/g'</span> /etc/apt/sources.list</span>
<span id="cb1922-2"><a href="chap-linux-command-bash.html#cb1922-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>安装编译 R 所需的系统依赖</li>
</ol>
<div class="sourceCode" id="cb1923"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1923-1"><a href="chap-linux-command-bash.html#cb1923-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get build-dep r-base-dev</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>编译安装 R</li>
</ol>
<div class="sourceCode" id="cb1924"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1924-1"><a href="chap-linux-command-bash.html#cb1924-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span></span>
<span id="cb1924-2"><a href="chap-linux-command-bash.html#cb1924-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="fu">make</span> install </span></code></pre></div>
<ol style="list-style-type: decimal">
<li>自定义编译选项</li>
</ol>
<div class="sourceCode" id="cb1925"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1925-1"><a href="chap-linux-command-bash.html#cb1925-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--help</span></span></code></pre></div>
</div>
<div id="centos-1" class="section level3" number="15.8.2">
<h3>
<span class="header-section-number">A.8.2</span> CentOS<a class="anchor" aria-label="anchor" href="#centos-1"><i class="fas fa-link"></i></a>
</h3>
<p>基于 CentOS 7 和 GCC 4.8.5，参考 R-admin 手册</p>
<ul>
<li>
<p>下载源码包</p>
<p>最新发布的稳定版</p>
<div class="sourceCode" id="cb1926"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1926-1"><a href="chap-linux-command-bash.html#cb1926-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fLo</span> ./R-latest.tar.gz https://mirrors.tuna.tsinghua.edu.cn/CRAN/src/base/R-latest.tar.gz</span></code></pre></div>
<pre><code>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
 10 28.7M   10 3232k    0     0   107k      0  0:04:34  0:00:30  0:04:04  118k</code></pre>
</li>
<li>
<p>安装依赖</p>
<div class="sourceCode" id="cb1928"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1928-1"><a href="chap-linux-command-bash.html#cb1928-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> yum-utils epel-release <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> yum-builddep R-devel</span>
<span id="cb1928-2"><a href="chap-linux-command-bash.html#cb1928-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> dnf builddep R-devel <span class="co"># Fedora 30</span></span></code></pre></div>
</li>
<li>
<p>解压配置</p>
<div class="sourceCode" id="cb1929"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1929-1"><a href="chap-linux-command-bash.html#cb1929-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> R-latest <span class="kw">&amp;&amp;</span> <span class="fu">tar</span> <span class="at">-xzf</span> ./R-latest.tar.gz <span class="at">-C</span> ./R-latest <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> R-3.5.2</span>
<span id="cb1929-2"><a href="chap-linux-command-bash.html#cb1929-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1929-3"><a href="chap-linux-command-bash.html#cb1929-3" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb1929-4"><a href="chap-linux-command-bash.html#cb1929-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span></span></code></pre></div>
<div class="sourceCode" id="cb1930"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1930-1"><a href="chap-linux-command-bash.html#cb1930-1" aria-hidden="true" tabindex="-1"></a>R is now configured for x86_64-pc-linux-gnu</span>
<span id="cb1930-2"><a href="chap-linux-command-bash.html#cb1930-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1930-3"><a href="chap-linux-command-bash.html#cb1930-3" aria-hidden="true" tabindex="-1"></a>  Source directory:          .</span>
<span id="cb1930-4"><a href="chap-linux-command-bash.html#cb1930-4" aria-hidden="true" tabindex="-1"></a>  Installation directory:    /usr/local</span>
<span id="cb1930-5"><a href="chap-linux-command-bash.html#cb1930-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1930-6"><a href="chap-linux-command-bash.html#cb1930-6" aria-hidden="true" tabindex="-1"></a>  C compiler:                gcc -std=gnu99  -g -O2</span>
<span id="cb1930-7"><a href="chap-linux-command-bash.html#cb1930-7" aria-hidden="true" tabindex="-1"></a>  Fortran 77 compiler:       gfortran  -g -O2</span>
<span id="cb1930-8"><a href="chap-linux-command-bash.html#cb1930-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1930-9"><a href="chap-linux-command-bash.html#cb1930-9" aria-hidden="true" tabindex="-1"></a>  Default C++ compiler:      g++   -g -O2</span>
<span id="cb1930-10"><a href="chap-linux-command-bash.html#cb1930-10" aria-hidden="true" tabindex="-1"></a>  C++98 compiler:            g++ -std=gnu++98 -g -O2</span>
<span id="cb1930-11"><a href="chap-linux-command-bash.html#cb1930-11" aria-hidden="true" tabindex="-1"></a>  C++11 compiler:            g++ -std=gnu++11 -g -O2</span>
<span id="cb1930-12"><a href="chap-linux-command-bash.html#cb1930-12" aria-hidden="true" tabindex="-1"></a>  C++14 compiler:</span>
<span id="cb1930-13"><a href="chap-linux-command-bash.html#cb1930-13" aria-hidden="true" tabindex="-1"></a>  C++17 compiler:</span>
<span id="cb1930-14"><a href="chap-linux-command-bash.html#cb1930-14" aria-hidden="true" tabindex="-1"></a>  Fortran 90/95 compiler:    gfortran -g -O2</span>
<span id="cb1930-15"><a href="chap-linux-command-bash.html#cb1930-15" aria-hidden="true" tabindex="-1"></a>  Obj-C compiler:            gcc -g -O2 -fobjc-exceptions</span>
<span id="cb1930-16"><a href="chap-linux-command-bash.html#cb1930-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1930-17"><a href="chap-linux-command-bash.html#cb1930-17" aria-hidden="true" tabindex="-1"></a>  Interfaces supported:      X11, tcltk</span>
<span id="cb1930-18"><a href="chap-linux-command-bash.html#cb1930-18" aria-hidden="true" tabindex="-1"></a>  External libraries:        readline, curl</span>
<span id="cb1930-19"><a href="chap-linux-command-bash.html#cb1930-19" aria-hidden="true" tabindex="-1"></a>  Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo, ICU</span>
<span id="cb1930-20"><a href="chap-linux-command-bash.html#cb1930-20" aria-hidden="true" tabindex="-1"></a>  Options enabled:           shared R library, shared BLAS, R profiling, memory profiling</span>
<span id="cb1930-21"><a href="chap-linux-command-bash.html#cb1930-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1930-22"><a href="chap-linux-command-bash.html#cb1930-22" aria-hidden="true" tabindex="-1"></a>  Capabilities skipped:</span>
<span id="cb1930-23"><a href="chap-linux-command-bash.html#cb1930-23" aria-hidden="true" tabindex="-1"></a>  Options not enabled:</span>
<span id="cb1930-24"><a href="chap-linux-command-bash.html#cb1930-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1930-25"><a href="chap-linux-command-bash.html#cb1930-25" aria-hidden="true" tabindex="-1"></a>  Recommended packages:      yes</span></code></pre></div>
</li>
<li>
<p>编译安装</p>
<div class="sourceCode" id="cb1931"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1931-1"><a href="chap-linux-command-bash.html#cb1931-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-j</span> 2 all</span>
<span id="cb1931-2"><a href="chap-linux-command-bash.html#cb1931-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> make install</span></code></pre></div>
</li>
<li>
<p>BLAS 加持（可选）</p>
<p>BLAS 对于加快矩阵计算至关重要，编译 R 带 <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#BLAS">BLAS 支持</a>，添加 OpenBLAS 支持 <code>--with-blas="-lopenblas"</code> 或 ATLAS 支持 <code>--with-blas="-L/usr/lib64/atlas -lsatlas"</code></p>
<div class="sourceCode" id="cb1932"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1932-1"><a href="chap-linux-command-bash.html#cb1932-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> openblas openblas-threads openblas-openmp </span>
<span id="cb1932-2"><a href="chap-linux-command-bash.html#cb1932-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1932-3"><a href="chap-linux-command-bash.html#cb1932-3" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb1932-4"><a href="chap-linux-command-bash.html#cb1932-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span> <span class="dt">\</span></span>
<span id="cb1932-5"><a href="chap-linux-command-bash.html#cb1932-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--with-blas</span><span class="op">=</span><span class="st">"-lopenblas"</span></span></code></pre></div>
<div class="sourceCode" id="cb1933"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1933-1"><a href="chap-linux-command-bash.html#cb1933-1" aria-hidden="true" tabindex="-1"></a>R is now configured for x86_64-pc-linux-gnu</span>
<span id="cb1933-2"><a href="chap-linux-command-bash.html#cb1933-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1933-3"><a href="chap-linux-command-bash.html#cb1933-3" aria-hidden="true" tabindex="-1"></a>Source directory:          .</span>
<span id="cb1933-4"><a href="chap-linux-command-bash.html#cb1933-4" aria-hidden="true" tabindex="-1"></a>Installation directory:    /usr/local</span>
<span id="cb1933-5"><a href="chap-linux-command-bash.html#cb1933-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1933-6"><a href="chap-linux-command-bash.html#cb1933-6" aria-hidden="true" tabindex="-1"></a>C compiler:                gcc -std=gnu99  -g -O2</span>
<span id="cb1933-7"><a href="chap-linux-command-bash.html#cb1933-7" aria-hidden="true" tabindex="-1"></a>Fortran 77 compiler:       gfortran  -g -O2</span>
<span id="cb1933-8"><a href="chap-linux-command-bash.html#cb1933-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1933-9"><a href="chap-linux-command-bash.html#cb1933-9" aria-hidden="true" tabindex="-1"></a>Default C++ compiler:      g++   -g -O2</span>
<span id="cb1933-10"><a href="chap-linux-command-bash.html#cb1933-10" aria-hidden="true" tabindex="-1"></a>C++98 compiler:            g++ -std=gnu++98 -g -O2</span>
<span id="cb1933-11"><a href="chap-linux-command-bash.html#cb1933-11" aria-hidden="true" tabindex="-1"></a>C++11 compiler:            g++ -std=gnu++11 -g -O2</span>
<span id="cb1933-12"><a href="chap-linux-command-bash.html#cb1933-12" aria-hidden="true" tabindex="-1"></a>C++14 compiler:</span>
<span id="cb1933-13"><a href="chap-linux-command-bash.html#cb1933-13" aria-hidden="true" tabindex="-1"></a>C++17 compiler:</span>
<span id="cb1933-14"><a href="chap-linux-command-bash.html#cb1933-14" aria-hidden="true" tabindex="-1"></a>Fortran 90/95 compiler:    gfortran -g -O2</span>
<span id="cb1933-15"><a href="chap-linux-command-bash.html#cb1933-15" aria-hidden="true" tabindex="-1"></a>Obj-C compiler:            gcc -g -O2 -fobjc-exceptions</span>
<span id="cb1933-16"><a href="chap-linux-command-bash.html#cb1933-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1933-17"><a href="chap-linux-command-bash.html#cb1933-17" aria-hidden="true" tabindex="-1"></a>Interfaces supported:      X11, tcltk</span>
<span id="cb1933-18"><a href="chap-linux-command-bash.html#cb1933-18" aria-hidden="true" tabindex="-1"></a>External libraries:        readline, **BLAS(OpenBLAS)**, curl</span>
<span id="cb1933-19"><a href="chap-linux-command-bash.html#cb1933-19" aria-hidden="true" tabindex="-1"></a>Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo, ICU</span>
<span id="cb1933-20"><a href="chap-linux-command-bash.html#cb1933-20" aria-hidden="true" tabindex="-1"></a>Options enabled:           shared R library, shared BLAS, R profiling, memory profiling</span>
<span id="cb1933-21"><a href="chap-linux-command-bash.html#cb1933-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1933-22"><a href="chap-linux-command-bash.html#cb1933-22" aria-hidden="true" tabindex="-1"></a>Capabilities skipped:</span>
<span id="cb1933-23"><a href="chap-linux-command-bash.html#cb1933-23" aria-hidden="true" tabindex="-1"></a>Options not enabled:</span>
<span id="cb1933-24"><a href="chap-linux-command-bash.html#cb1933-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1933-25"><a href="chap-linux-command-bash.html#cb1933-25" aria-hidden="true" tabindex="-1"></a>Recommended packages:      yes</span></code></pre></div>
<p>配置成功的标志，如 OpenBLAS</p>
<pre><code>checking for dgemm_ in -lopenblas... yes
checking whether double complex BLAS can be used... yes
checking whether the BLAS is complete... yes</code></pre>
<p>ATLAS 加持</p>
<div class="sourceCode" id="cb1935"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1935-1"><a href="chap-linux-command-bash.html#cb1935-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> atlas</span>
<span id="cb1935-2"><a href="chap-linux-command-bash.html#cb1935-2" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb1935-3"><a href="chap-linux-command-bash.html#cb1935-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span> <span class="dt">\</span></span>
<span id="cb1935-4"><a href="chap-linux-command-bash.html#cb1935-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--with-blas</span><span class="op">=</span><span class="st">"-L/usr/lib64/atlas -lsatlas"</span></span></code></pre></div>
<div class="sourceCode" id="cb1936"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1936-1"><a href="chap-linux-command-bash.html#cb1936-1" aria-hidden="true" tabindex="-1"></a>R is now configured for x86_64-pc-linux-gnu</span>
<span id="cb1936-2"><a href="chap-linux-command-bash.html#cb1936-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1936-3"><a href="chap-linux-command-bash.html#cb1936-3" aria-hidden="true" tabindex="-1"></a>Source directory:          .</span>
<span id="cb1936-4"><a href="chap-linux-command-bash.html#cb1936-4" aria-hidden="true" tabindex="-1"></a>Installation directory:    /usr/local</span>
<span id="cb1936-5"><a href="chap-linux-command-bash.html#cb1936-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1936-6"><a href="chap-linux-command-bash.html#cb1936-6" aria-hidden="true" tabindex="-1"></a>C compiler:                gcc -std=gnu99  -g -O2</span>
<span id="cb1936-7"><a href="chap-linux-command-bash.html#cb1936-7" aria-hidden="true" tabindex="-1"></a>Fortran 77 compiler:       gfortran  -g -O2</span>
<span id="cb1936-8"><a href="chap-linux-command-bash.html#cb1936-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1936-9"><a href="chap-linux-command-bash.html#cb1936-9" aria-hidden="true" tabindex="-1"></a>Default C++ compiler:      g++   -g -O2</span>
<span id="cb1936-10"><a href="chap-linux-command-bash.html#cb1936-10" aria-hidden="true" tabindex="-1"></a>C++98 compiler:            g++ -std=gnu++98 -g -O2</span>
<span id="cb1936-11"><a href="chap-linux-command-bash.html#cb1936-11" aria-hidden="true" tabindex="-1"></a>C++11 compiler:            g++ -std=gnu++11 -g -O2</span>
<span id="cb1936-12"><a href="chap-linux-command-bash.html#cb1936-12" aria-hidden="true" tabindex="-1"></a>C++14 compiler:</span>
<span id="cb1936-13"><a href="chap-linux-command-bash.html#cb1936-13" aria-hidden="true" tabindex="-1"></a>C++17 compiler:</span>
<span id="cb1936-14"><a href="chap-linux-command-bash.html#cb1936-14" aria-hidden="true" tabindex="-1"></a>Fortran 90/95 compiler:    gfortran -g -O2</span>
<span id="cb1936-15"><a href="chap-linux-command-bash.html#cb1936-15" aria-hidden="true" tabindex="-1"></a>Obj-C compiler:            gcc -g -O2 -fobjc-exceptions</span>
<span id="cb1936-16"><a href="chap-linux-command-bash.html#cb1936-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1936-17"><a href="chap-linux-command-bash.html#cb1936-17" aria-hidden="true" tabindex="-1"></a>Interfaces supported:      X11, tcltk</span>
<span id="cb1936-18"><a href="chap-linux-command-bash.html#cb1936-18" aria-hidden="true" tabindex="-1"></a>External libraries:        readline, **BLAS(generic)**, curl</span>
<span id="cb1936-19"><a href="chap-linux-command-bash.html#cb1936-19" aria-hidden="true" tabindex="-1"></a>Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo, ICU</span>
<span id="cb1936-20"><a href="chap-linux-command-bash.html#cb1936-20" aria-hidden="true" tabindex="-1"></a>Options enabled:           shared R library, shared BLAS, R profiling, memory profiling</span>
<span id="cb1936-21"><a href="chap-linux-command-bash.html#cb1936-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1936-22"><a href="chap-linux-command-bash.html#cb1936-22" aria-hidden="true" tabindex="-1"></a>Capabilities skipped:</span>
<span id="cb1936-23"><a href="chap-linux-command-bash.html#cb1936-23" aria-hidden="true" tabindex="-1"></a>Options not enabled:</span>
<span id="cb1936-24"><a href="chap-linux-command-bash.html#cb1936-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1936-25"><a href="chap-linux-command-bash.html#cb1936-25" aria-hidden="true" tabindex="-1"></a>Recommended packages:      yes</span></code></pre></div>
<p>ATLAS 配置成功</p>
<pre><code>checking for dgemm_ in -L/usr/lib64/atlas -lsatlas... yes
checking whether double complex BLAS can be used... yes
checking whether the BLAS is complete... yes</code></pre>
</li>
</ul>
<p>后续步骤同上</p>
</div>
</div>
<div id="ninja-install" class="section level2" number="15.9">
<h2>
<span class="header-section-number">A.9</span> 忍者安装<a class="anchor" aria-label="anchor" href="#ninja-install"><i class="fas fa-link"></i></a>
</h2>
<p>从源码自定义安装：加速 Intel MKL 和 大文件支持</p>
<p><a href="https://software.intel.com/en-us/articles/using-intel-mkl-with-r" class="uri">https://software.intel.com/en-us/articles/using-intel-mkl-with-r</a></p>
</div>
<div id="settings" class="section level2" number="15.10">
<h2>
<span class="header-section-number">A.10</span> 配置<a class="anchor" aria-label="anchor" href="#settings"><i class="fas fa-link"></i></a>
</h2>
<div id="init-session" class="section level3" number="15.10.1">
<h3>
<span class="header-section-number">A.10.1</span> 初始会话 <code>.Rprofile</code><a class="anchor" aria-label="anchor" href="#init-session"><i class="fas fa-link"></i></a>
</h3>
<p><code>.Rprofile</code> 文件位于 <code>~/</code> 目录下或者 R 项目的根目录下</p>
<p>查看帮助 <code><a href="https://rdrr.io/r/base/Startup.html">?.Rprofile</a></code></p>
<p>更多配置设置 <a href="https://github.com/HenrikBengtsson/startup">startup</a></p>
</div>
<div id="environ-vars" class="section level3" number="15.10.2">
<h3>
<span class="header-section-number">A.10.2</span> 环境变量 <code>.Renviron</code><a class="anchor" aria-label="anchor" href="#environ-vars"><i class="fas fa-link"></i></a>
</h3>
<p><code>.Renviron</code> 文件位于 <code>~/</code> 目录下</p>
</div>
<div id="make-vars" class="section level3" number="15.10.3">
<h3>
<span class="header-section-number">A.10.3</span> 编译选项 <code>Makevars</code><a class="anchor" aria-label="anchor" href="#make-vars"><i class="fas fa-link"></i></a>
</h3>
<p><code>Makevars</code> 文件位于 <code>~/.R/</code> 目录下</p>
</div>
</div>
<div id="command-line-arguments" class="section level2" number="15.11">
<h2>
<span class="header-section-number">A.11</span> 命令行参数<a class="anchor" aria-label="anchor" href="#command-line-arguments"><i class="fas fa-link"></i></a>
</h2>
<p><code>commandArgs</code> 从终端命令行中传递参数</p>
<ul>
<li>
<a href="https://github.com/mdequeljoe/rdoc">rdoc</a> 高亮 R 帮助文档中的 R 函数、关键字 <code>NULL</code>。启用需要在R控制台中执行 <code>rdoc::use_rdoc()</code>
</li>
<li>
<a href="https://github.com/randy3k/radian">radian</a> 代码自动补全和语法高亮，进入 R 控制台，终端中输入<code>radian</code>
</li>
<li>
<a href="https://github.com/docopt/docopt.R">docopt</a> 提供R命令行工具，如 <a href="https://github.com/eddelbuettel/littler">littler</a> 包，<a href="https://github.com/trevorld/r-getopt">getopt</a> 从终端命令行接受参数</li>
<li>
<a href="https://github.com/trevorld/r-optparse">optparse</a> 命令行选项参数的解析器</li>
</ul>
<p>安装完 R-littler R-littler-examples (centos) 或 littler r-cran-littler (ubuntu) 后，执行</p>
<div class="sourceCode" id="cb1938"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1938-1"><a href="chap-linux-command-bash.html#cb1938-1" aria-hidden="true" tabindex="-1"></a><span class="co"># centos</span></span>
<span id="cb1938-2"><a href="chap-linux-command-bash.html#cb1938-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/install.r /usr/bin/install.r </span>
<span id="cb1938-3"><a href="chap-linux-command-bash.html#cb1938-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/install2.r /usr/bin/install2.r</span>
<span id="cb1938-4"><a href="chap-linux-command-bash.html#cb1938-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/installGithub.r /usr/bin/installGithub.r </span>
<span id="cb1938-5"><a href="chap-linux-command-bash.html#cb1938-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/testInstalled.r /usr/bin/testInstalled.r</span>
<span id="cb1938-6"><a href="chap-linux-command-bash.html#cb1938-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ubuntu</span></span>
<span id="cb1938-7"><a href="chap-linux-command-bash.html#cb1938-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/install.r /usr/bin/install.r </span>
<span id="cb1938-8"><a href="chap-linux-command-bash.html#cb1938-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/install2.r /usr/bin/install2.r</span>
<span id="cb1938-9"><a href="chap-linux-command-bash.html#cb1938-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/installGithub.r /usr/bin/installGithub.r </span>
<span id="cb1938-10"><a href="chap-linux-command-bash.html#cb1938-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/testInstalled.r /usr/bin/testInstalled.r</span></code></pre></div>
<p>这样可以载终端中安装 R 包了</p>
<div class="sourceCode" id="cb1939"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1939-1"><a href="chap-linux-command-bash.html#cb1939-1" aria-hidden="true" tabindex="-1"></a>install.r docopt</span></code></pre></div>
<pre><code>#!/usr/bin/env Rscript
# 安装 optparse 提供更加灵活的传参方式
# 也可参考 littler https://github.com/eddelbuettel/littler
# if("optparse" %in% .packages(TRUE)) install.packages('optparse',repos = "https://cran.rstudio.com")
# https://cran.r-project.org/doc/manuals/R-intro.html#Invoking-R-from-the-command-line
# http://www.cureffi.org/2014/01/15/running-r-batch-mode-linux/
args = commandArgs(trailingOnly=TRUE)

# 函数功能：在浏览器中同时打开多个 PDF 文档
open_pdf &lt;- function(pdf_path = "./figures/", n = 1) {
  # pdf_path:     PDF文件所在目录
  # n:            默认打开1个PDF文档
  # PDF文档目录
  pdfs &lt;- list.files(pdf_path, pattern = '\\.pdf$')
  # PDF 文档路径
  path_to_pdfs &lt;- paste(pdf_path, pdfs, sep = .Platform$file.sep)
  # 打开 PDF 文档
  invisible(lapply(head(path_to_pdfs, n), browseURL))
}

open_pdf(pdf_path, n = args[1])

# 使用： Rscript --vanilla code/batch-open-pdf.R 20</code></pre>
</div>
<div id="sec-build-source-code" class="section level2" number="15.12">
<h2>
<span class="header-section-number">A.12</span> 从源码安装 R<a class="anchor" aria-label="anchor" href="#sec-build-source-code"><i class="fas fa-link"></i></a>
</h2>
<p>从源码编译 R 的需求大概有以下几点：</p>
<ol style="list-style-type: decimal">
<li>爱折腾的极客：玩配置，学习 make 相关工具和 Linux 世界的依赖</li>
<li>追求性能：如 <a href="http://users.suse.com/~aj/linux_lfs.html">LFS 支持</a> 和 <a href="http://dirk.eddelbuettel.com/blog/2018/04/15/#018_mkl_for_debian_ubuntu">Intel MKL 加速</a>
</li>
<li>环境限制：CentOS 或者红帽系统，自带的 R 版本比较落后</li>
</ol>
<div class="sourceCode" id="cb1941"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1941-1"><a href="chap-linux-command-bash.html#cb1941-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span>/opt/R/R-devel <span class="dt">\</span></span>
<span id="cb1941-2"><a href="chap-linux-command-bash.html#cb1941-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb1941-3"><a href="chap-linux-command-bash.html#cb1941-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span> <span class="at">--with-blas</span><span class="op">=</span><span class="st">"-lopenblas"</span></span></code></pre></div>
<pre><code>R is now configured for x86_64-pc-linux-gnu

  Source directory:            .
  Installation directory:      /opt/R/R-devel

  C compiler:                  gcc  -g -O2
  Fortran fixed-form compiler: gfortran -fno-optimize-sibling-calls -g -O2

  Default C++ compiler:        g++ -std=gnu++11  -g -O2
  C++14 compiler:              g++ -std=gnu++14  -g -O2
  C++17 compiler:              g++ -std=gnu++17  -g -O2
  C++20 compiler:              g++ -std=gnu++2a  -g -O2
  Fortran free-form compiler:  gfortran -fno-optimize-sibling-calls -g -O2
  Obj-C compiler:               

  Interfaces supported:        X11, tcltk
  External libraries:          pcre2, readline, BLAS(OpenBLAS), curl
  Additional capabilities:     PNG, JPEG, TIFF, NLS, cairo, ICU
  Options enabled:             shared R library, shared BLAS, R profiling, memory profiling

  Capabilities skipped:        
  Options not enabled:         

  Recommended packages:        yes</code></pre>
<p>配置好了以后，可以编译安装了</p>
<div class="sourceCode" id="cb1943"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1943-1"><a href="chap-linux-command-bash.html#cb1943-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> make install</span></code></pre></div>
<p><a href="https://github.com/Enchufa2/r-flexiblas">flexiblas</a> 支持多种 BLAS 库自由切换</p>
</div>
<div id="install-softwares" class="section level2" number="15.13">
<h2>
<span class="header-section-number">A.13</span> 安装软件<a class="anchor" aria-label="anchor" href="#install-softwares"><i class="fas fa-link"></i></a>
</h2>
<p>本书在后续章节中陆续用到新的 R 包，其安装过程不会在正文中呈现，下面以在 CentOS 8 上安装 <strong>sf</strong> 包为例介绍。首先需要安装一些系统依赖，具体安装哪些依赖参见 <strong>sf</strong> 包开发站点 <a href="https://github.com/r-spatial/sf" class="uri">https://github.com/r-spatial/sf</a>。</p>
<div class="sourceCode" id="cb1944"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1944-1"><a href="chap-linux-command-bash.html#cb1944-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf config-manager <span class="at">--set-disabled</span> PowerTools <span class="co"># openblas-devel</span></span>
<span id="cb1944-2"><a href="chap-linux-command-bash.html#cb1944-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> sqlite-devel gdal-devel <span class="dt">\</span></span>
<span id="cb1944-3"><a href="chap-linux-command-bash.html#cb1944-3" aria-hidden="true" tabindex="-1"></a>  proj-devel geos-devel udunits2-devel</span></code></pre></div>
<p>然后，在 R 命令行窗口中，执行安装命令：</p>
<div class="sourceCode" id="cb1945"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'sf'</span><span class="op">)</span></code></pre></div>
<p>至此，安装完成。如遇本地未安装的新 R 包，可从其官方文档中找寻安装方式。如果你完全不知道自己应该安装哪些，考虑把下面的依赖都安装上</p>
<div class="sourceCode" id="cb1946"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1946-1"><a href="chap-linux-command-bash.html#cb1946-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb1946-2"><a href="chap-linux-command-bash.html#cb1946-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># magick</span></span>
<span id="cb1946-3"><a href="chap-linux-command-bash.html#cb1946-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">ImageMagick-c++-devel</span> <span class="dt">\ </span></span>
<span id="cb1946-4"><a href="chap-linux-command-bash.html#cb1946-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pdftools</span></span>
<span id="cb1946-5"><a href="chap-linux-command-bash.html#cb1946-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">poppler-cpp-devel</span> <span class="dt">\ </span></span>
<span id="cb1946-6"><a href="chap-linux-command-bash.html#cb1946-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gifski</span></span>
<span id="cb1946-7"><a href="chap-linux-command-bash.html#cb1946-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">cargo</span> </span></code></pre></div>
<p>软件包管理器架构图，各个命令分别担负什么样的功能，每个命令学习的一般路径是什么，而不是详细介绍每个命令、每个参数的使用，只需给出一个命令的完整使用即可，其余给出一个查询命令帮助手册</p>
<div class="sourceCode" id="cb1947"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1947-1"><a href="chap-linux-command-bash.html#cb1947-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> copr</span>
<span id="cb1947-2"><a href="chap-linux-command-bash.html#cb1947-2" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> config-manager</span></code></pre></div>
</div>
<div id="sec-install-r-pkgs" class="section level2" number="15.14">
<h2>
<span class="header-section-number">A.14</span> 安装 R 包<a class="anchor" aria-label="anchor" href="#sec-install-r-pkgs"><i class="fas fa-link"></i></a>
</h2>
<p>Iñaki Ucar 开发的 <a href="https://github.com/Enchufa2/cran2copr">cran2copr</a> 项目实现在 Fedora 上安装预编译好的二进制 R 包，项目目的类似 Debian 平台上的 <a href="https://github.com/r-builder/cran2deb">cran2deb</a></p>
<ol style="list-style-type: decimal">
<li>
<p><a href="https://github.com/r-lib/devtools">devtools</a> 是开发 R 包的常用工具，同时具有很重的依赖，请看</p>
<div class="sourceCode" id="cb1948"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/package_dependencies.html">package_dependencies</a></span><span class="op">(</span><span class="st">'devtools'</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## $devtools
##   [1] "usethis"     "cli"         "desc"        "ellipsis"    "fs"         
##   [6] "lifecycle"   "memoise"     "miniUI"      "pkgbuild"    "pkgdown"    
##  [11] "pkgload"     "profvis"     "rcmdcheck"   "remotes"     "rlang"      
##  [16] "roxygen2"    "rversions"   "sessioninfo" "stats"       "testthat"   
##  [21] "tools"       "urlchecker"  "utils"       "withr"       "R6"         
##  [26] "rprojroot"   "methods"     "glue"        "cachem"      "shiny"      
##  [31] "htmltools"   "callr"       "crayon"      "prettyunits" "processx"   
##  [36] "bslib"       "digest"      "downlit"     "httr"        "jsonlite"   
##  [41] "magrittr"    "purrr"       "ragg"        "rmarkdown"   "tibble"     
##  [46] "whisker"     "xml2"        "yaml"        "htmlwidgets" "stringr"    
##  [51] "curl"        "xopen"       "brew"        "commonmark"  "knitr"      
##  [56] "stringi"     "cpp11"       "brio"        "evaluate"    "praise"     
##  [61] "ps"          "waldo"       "clipr"       "gert"        "gh"         
##  [66] "rappdirs"    "rstudioapi"  "graphics"    "grDevices"   "sass"       
##  [71] "jquerylib"   "base64enc"   "mime"        "fastmap"     "fansi"      
##  [76] "vctrs"       "askpass"     "credentials" "openssl"     "sys"        
##  [81] "zip"         "gitcreds"    "httr2"       "ini"         "highr"      
##  [86] "xfun"        "systemfonts" "textshaping" "fontawesome" "tinytex"    
##  [91] "httpuv"      "xtable"      "sourcetools" "later"       "promises"   
##  [96] "pillar"      "pkgconfig"   "diffobj"     "rematch2"    "Rcpp"       
## [101] "utf8"</code></pre>
<p>其中，依赖关系见表 <a href="chap-linux-command-bash.html#tab:devtools-sys-dep">A.2</a></p>
<table class="table table-sm">
<caption>
<span id="tab:devtools-sys-dep">表 A.2: </span> devtools 的系统依赖</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">curl</th>
<th align="left">git2r</th>
<th align="left">openssl</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ubuntu</td>
<td align="left">libcurl-dev<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;libcurl-dev 是一个虚包 virtual package，由 libcurl4-openssl-dev 或 libcurl4-nss-dev 或 libcurl4-gnutls-dev 实际提供，选择其中一个安装即可。&lt;/p&gt;"><sup>53</sup></a>
</td>
<td align="left">libgit2-dev</td>
<td align="left">libssl-dev</td>
</tr>
<tr class="even">
<td align="left">CentOS</td>
<td align="left">libcurl-devel</td>
<td align="left">libgit2-devel</td>
<td align="left">openssl-devel</td>
</tr>
</tbody>
</table>
</li>
</ol>
<ol style="list-style-type: decimal">
<li>
<p><a href="https://github.com/r-spatial/sf">sf</a> 是处理空间数据的常用工具</p>
<div class="sourceCode" id="cb1950"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/package_dependencies.html">package_dependencies</a></span><span class="op">(</span><span class="st">'sf'</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## $sf
##  [1] "methods"    "classInt"   "DBI"        "graphics"   "grDevices" 
##  [6] "grid"       "magrittr"   "Rcpp"       "s2"         "stats"     
## [11] "tools"      "units"      "utils"      "e1071"      "class"     
## [16] "KernSmooth" "wk"         "MASS"       "proxy"</code></pre>
<p>其主要的系统依赖分别是 GEOS 3.5.1, GDAL 2.2.2, PROJ 4.9.2</p>
<div class="sourceCode" id="cb1952"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1952-1"><a href="chap-linux-command-bash.html#cb1952-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:ubuntugis/ubuntugis-unstable</span>
<span id="cb1952-2"><a href="chap-linux-command-bash.html#cb1952-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1952-3"><a href="chap-linux-command-bash.html#cb1952-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libudunits2-dev libgdal-dev libgeos-dev libproj-dev </span></code></pre></div>
<p>这样也同时解决了 <a href="https://github.com/pacificclimate/Rudunits2">udunits2</a>、 <a href="https://r-forge.r-project.org/projects/rgdal/">rgdal</a> 和 <a href="https://r-forge.r-project.org/projects/rgeos/">rgeos</a> 等 3个 R 包的系统依赖，其中 udunits2 使用如下命令安装</p>
<div class="sourceCode" id="cb1953"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1953-1"><a href="chap-linux-command-bash.html#cb1953-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(’udunits2’, <span class="at">configure.args =</span> <span class="st">'--with-udunits2-include=/usr/include/udunits2'</span>)</span></code></pre></div>
</li>
<li>
<p>图形设备支持 cairo png jpeg tiff</p>
<div class="sourceCode" id="cb1954"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1954-1"><a href="chap-linux-command-bash.html#cb1954-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libcairo2-dev libjpeg-dev libpng-dev libtiff-dev </span></code></pre></div>
</li>
<li>
<p>图像处理 <a href="https://github.com/dahtah/imager">imager</a> 和 <a href="https://github.com/ropensci/magick">magick</a></p>
<div class="sourceCode" id="cb1955"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1955-1"><a href="chap-linux-command-bash.html#cb1955-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install fftw-devel <span class="co"># CentOS</span></span>
<span id="cb1955-2"><a href="chap-linux-command-bash.html#cb1955-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libfftw3-dev <span class="co"># Ubuntu</span></span></code></pre></div>
<p>在 Ubuntu 系统上安装最新的 libmagick++-dev 库</p>
<div class="sourceCode" id="cb1956"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1956-1"><a href="chap-linux-command-bash.html#cb1956-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:opencpu/imagemagick</span>
<span id="cb1956-2"><a href="chap-linux-command-bash.html#cb1956-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1956-3"><a href="chap-linux-command-bash.html#cb1956-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libmagick++-dev </span></code></pre></div>
<p>在 CentOS 系统上</p>
<div class="sourceCode" id="cb1957"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1957-1"><a href="chap-linux-command-bash.html#cb1957-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> ImageMagick-c++-devel</span></code></pre></div>
<p>然后安装 R 包 <code>install.packages(c('imager', 'magick'))</code></p>
</li>
<li>
<p><a href="https://r-forge.r-project.org/projects/rgl/">rgl</a> 是绘制真三维图形的重量级 R 包</p>
<div class="sourceCode" id="cb1958"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1958-1"><a href="chap-linux-command-bash.html#cb1958-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libcgal-dev libglu1-mesa-dev libx11-dev <span class="co"># Ubuntu</span></span>
<span id="cb1958-2"><a href="chap-linux-command-bash.html#cb1958-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install mesa-libGLU mesa-libGLU-devel <span class="co"># CentOS</span></span></code></pre></div>
<p>然后安装 R 包</p>
<div class="sourceCode" id="cb1959"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'rgl'</span><span class="op">)</span></code></pre></div>
<p>在 Ubuntu 系统上还可以这样安装</p>
<div class="sourceCode" id="cb1960"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1960-1"><a href="chap-linux-command-bash.html#cb1960-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:marutter/rrutter3.5</span>
<span id="cb1960-2"><a href="chap-linux-command-bash.html#cb1960-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1960-3"><a href="chap-linux-command-bash.html#cb1960-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-cran-rgl</span></code></pre></div>
</li>
<li>
<p><a href="https://github.com/s-u/rJava">rJava</a> 是 Java 语言和 R 语言之间实现通信交流的桥梁</p>
<div class="sourceCode" id="cb1961"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1961-1"><a href="chap-linux-command-bash.html#cb1961-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> default-jdk</span>
<span id="cb1961-2"><a href="chap-linux-command-bash.html#cb1961-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> R CMD javareconf</span></code></pre></div>
<p>然后安装 rJava 包 <code>install.packages(’rJava’)</code></p>
</li>
<li>
<p><a href="https://igraph.org/">igraph</a> 是网络数据分析的必备 R 包，为了发挥其最大性能，需要安装三个系统依赖</p>
<div class="sourceCode" id="cb1962"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1962-1"><a href="chap-linux-command-bash.html#cb1962-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libgmp-dev libxml2-dev libglpk-dev</span></code></pre></div>
<p>然后安装 R 包</p>
<div class="sourceCode" id="cb1963"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'igraph'</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><a href="https://github.com/cdeterman/gpuR">gpuR</a> 是基于 GPU 进行矩阵计算的扩展包，依赖 RcppEigen 确保安装 OpenCL 和 RViennaCL 或者 安装 Nvidia 驱动和 CUDA，使用 <a href="https://github.com/gpuRcore/gpuRcuda">gpuRcuda</a> 和 <a href="https://github.com/nullsatz/gputools">gputools</a> 扩展包，下面安装指导来自其 Wiki</p>
<div class="sourceCode" id="cb1964"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1964-1"><a href="chap-linux-command-bash.html#cb1964-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install OpenCL headers</span></span>
<span id="cb1964-2"><a href="chap-linux-command-bash.html#cb1964-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install opencl-headers opencv-dev</span>
<span id="cb1964-3"><a href="chap-linux-command-bash.html#cb1964-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1964-4"><a href="chap-linux-command-bash.html#cb1964-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install NVIDIA Drivers and CUDA</span></span>
<span id="cb1964-5"><a href="chap-linux-command-bash.html#cb1964-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:xorg-edgers/ppa</span>
<span id="cb1964-6"><a href="chap-linux-command-bash.html#cb1964-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1964-7"><a href="chap-linux-command-bash.html#cb1964-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install nvidia-346 nvidia-settings</span></code></pre></div>
</li>
<li><p><a href="https://github.com/jyypma/nloptr">nloptr</a> 是 <a href="https://github.com/stevengj/NLopt/">NLopt</a> 的 R 语言接口，首先安装 NLopt 程序库 <code>sudo apt-get install libnlopt-dev</code> 然后安装 R 包<code>install.packages('nloptr')</code>，nloptr 被 700+ R 包依赖，如 <strong>lme4</strong>， <strong>spaMM</strong>， <strong>glmmTMB</strong>， <strong>rstanarm</strong> 等。</p></li>
<li>
<p>Rmpfr</p>
<div class="sourceCode" id="cb1965"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1965-1"><a href="chap-linux-command-bash.html#cb1965-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libmpfr-dev</span></code></pre></div>
<div class="sourceCode" id="cb1966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1966-1"><a href="chap-linux-command-bash.html#cb1966-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(’Rmpfr’)</span></code></pre></div>
</li>
<li>
<p>geojson</p>
<div class="sourceCode" id="cb1967"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1967-1"><a href="chap-linux-command-bash.html#cb1967-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install jq-devel protobuf-devel</span></code></pre></div>
<div class="sourceCode" id="cb1968"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'geojson'</span>,<span class="st">'geojsonio'</span>,<span class="st">'jqr'</span>,<span class="st">'protolite'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p>lgcp</p>
<div class="sourceCode" id="cb1969"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1969-1"><a href="chap-linux-command-bash.html#cb1969-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install bwidget</span></code></pre></div>
<div class="sourceCode" id="cb1970"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'rpanel'</span>,<span class="st">'lgcp'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p>ijtiff</p>
<div class="sourceCode" id="cb1971"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1971-1"><a href="chap-linux-command-bash.html#cb1971-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install jbigkit-devel</span></code></pre></div>
<div class="sourceCode" id="cb1972"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'ijtiff'</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p>webshot 包用于截图</p>
<div class="sourceCode" id="cb1973"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1973-1"><a href="chap-linux-command-bash.html#cb1973-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install phantomjs</span></code></pre></div>
<div class="sourceCode" id="cb1974"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1974-1"><a href="chap-linux-command-bash.html#cb1974-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(’webshot’)</span></code></pre></div>
</li>
<li>
<p>gifski 包合成 GIF 动图</p>
<div class="sourceCode" id="cb1975"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1975-1"><a href="chap-linux-command-bash.html#cb1975-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install cargo</span></code></pre></div>
<div class="sourceCode" id="cb1976"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'gifski'</span><span class="op">)</span></code></pre></div>
</li>
</ol>
</div>
<div id="sec-software-manager" class="section level2" number="15.15">
<h2>
<span class="header-section-number">A.15</span> 软件包管理器<a class="anchor" aria-label="anchor" href="#sec-software-manager"><i class="fas fa-link"></i></a>
</h2>
<div id="subsec-dnf-yum" class="section level3" number="15.15.1">
<h3>
<span class="header-section-number">A.15.1</span> dnf<a class="anchor" aria-label="anchor" href="#subsec-dnf-yum"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>清理升级后的 CentOS 8 系统内核</li>
</ol>
<p>查找系统安装的内核</p>
<div class="sourceCode" id="cb1977"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1977-1"><a href="chap-linux-command-bash.html#cb1977-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rpm</span> <span class="at">-qa</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">grep</span> kernel</span></code></pre></div>
<pre><code>kernel-4.18.0-147.8.1.el8_1.x86_64
kernel-4.18.0-193.6.3.el8_2.x86_64
kernel-core-4.18.0-147.8.1.el8_1.x86_64
kernel-core-4.18.0-193.6.3.el8_2.x86_64
kernel-headers-4.18.0-193.6.3.el8_2.x86_64
kernel-modules-4.18.0-147.8.1.el8_1.x86_64
kernel-modules-4.18.0-193.6.3.el8_2.x86_64
kernel-tools-4.18.0-193.6.3.el8_2.x86_64
kernel-tools-libs-4.18.0-193.6.3.el8_2.x86_64</code></pre>
<p>仅保留一个版本的内核，其它旧的内核都删除掉</p>
<div class="sourceCode" id="cb1979"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1979-1"><a href="chap-linux-command-bash.html#cb1979-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf remove <span class="va">$(</span><span class="ex">dnf</span> repoquery <span class="at">--installonly</span> <span class="at">--latest-limit</span><span class="op">=</span>-1 <span class="at">-q</span><span class="va">)</span></span></code></pre></div>
<pre><code>模块依赖问题

 问题 1: conflicting requests
  - nothing provides module(perl:5.26) needed by module perl-DBD-MySQL:4.046:8010020191114030811:073fa5fe-0.x86_64
 问题 2: conflicting requests
  - nothing provides module(perl:5.26) needed by module perl-DBI:1.641:8010020191113222731:16b3ab4d-0.x86_64
 问题 3: conflicting requests
  - nothing provides module(perl:5.26) needed by module perl-YAML:1.24:8010020191114031501:a5949e2e-0.x86_64
依赖关系解决。
=======================================================================================================================
 软件包                        架构                  版本                                 仓库                    大小
=======================================================================================================================
移除:
 kernel                        x86_64                4.18.0-147.8.1.el8_1                 @BaseOS                  0  
 kernel-core                   x86_64                4.18.0-147.8.1.el8_1                 @BaseOS                 58 M
 kernel-modules                x86_64                4.18.0-147.8.1.el8_1                 @BaseOS                 20 M

事务概要
=======================================================================================================================
移除  3 软件包

将会释放空间：78 M
确定吗？[y/N]： y
运行事务检查
事务检查成功。
运行事务测试
事务测试成功。
运行事务
  准备中  :                                                                                                        1/1 
  删除    : kernel-4.18.0-147.8.1.el8_1.x86_64                                                                     1/3 
  运行脚本: kernel-4.18.0-147.8.1.el8_1.x86_64                                                                     1/3 
  删除    : kernel-modules-4.18.0-147.8.1.el8_1.x86_64                                                             2/3 
  运行脚本: kernel-modules-4.18.0-147.8.1.el8_1.x86_64                                                             2/3 
  运行脚本: kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                3/3 
  删除    : kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                3/3 
  运行脚本: kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                3/3 
  验证    : kernel-4.18.0-147.8.1.el8_1.x86_64                                                                     1/3 
  验证    : kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                2/3 
  验证    : kernel-modules-4.18.0-147.8.1.el8_1.x86_64                                                             3/3 

已移除:
  kernel-4.18.0-147.8.1.el8_1.x86_64                          kernel-core-4.18.0-147.8.1.el8_1.x86_64                 
  kernel-modules-4.18.0-147.8.1.el8_1.x86_64                 

完毕！</code></pre>
<p><a href="https://unix.stackexchange.com/questions/587853/centos-8-modular-dependency-problems">解决上述模块依赖问题的办法</a> 是重置三个 Perl 模块</p>
<div class="sourceCode" id="cb1981"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1981-1"><a href="chap-linux-command-bash.html#cb1981-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf module reset perl-DBD-MySQL perl-YAML perl-DBI</span></code></pre></div>
<pre><code>依赖关系解决。
=======================================================================================================================
 软件包                      架构                       版本                         仓库                         大小
=======================================================================================================================
重置模块:
 perl-DBD-MySQL                                                                                                       
 perl-DBI                                                                                                             
 perl-YAML                                                                                                            

事务概要
=======================================================================================================================

确定吗？[y/N]： y
完毕！</code></pre>
</div>
<div id="subsec-apt-get" class="section level3" number="15.15.2">
<h3>
<span class="header-section-number">A.15.2</span> apt<a class="anchor" aria-label="anchor" href="#subsec-apt-get"><i class="fas fa-link"></i></a>
</h3>
<p>添加或删除 PPA (Personal Package Archive)，比如在 Ubuntu 20.04 及之前的版本上安装<a href="https://inkscape.org/release/inkscape-1.0/gnulinux/ubuntu/ppa/dl/">新版 Inkscape</a></p>
<div class="sourceCode" id="cb1983"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1983-1"><a href="chap-linux-command-bash.html#cb1983-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:inkscape.dev/stable</span>
<span id="cb1983-2"><a href="chap-linux-command-bash.html#cb1983-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">--remove</span> ppa:inkscape.dev/stable</span></code></pre></div>
<div class="sourceCode" id="cb1984"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1984-1"><a href="chap-linux-command-bash.html#cb1984-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install build-essential <span class="co"># 修复依赖问题</span></span>
<span id="cb1984-2"><a href="chap-linux-command-bash.html#cb1984-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="co"># 更新资源列表</span></span>
<span id="cb1984-3"><a href="chap-linux-command-bash.html#cb1984-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get upgrade <span class="co"># 更新软件包</span></span>
<span id="cb1984-4"><a href="chap-linux-command-bash.html#cb1984-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get autoclean <span class="co"># 删除已卸的软件的备份</span></span>
<span id="cb1984-5"><a href="chap-linux-command-bash.html#cb1984-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get clean <span class="co"># 删除已装或已卸的软件的备份</span></span>
<span id="cb1984-6"><a href="chap-linux-command-bash.html#cb1984-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get autoremove <span class="at">--purge</span> <span class="pp">*</span> <span class="co"># 推荐卸载软件的方式</span></span>
<span id="cb1984-7"><a href="chap-linux-command-bash.html#cb1984-7" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-get</span> list <span class="at">--upgradable</span> <span class="co"># 列出可升级的包</span></span></code></pre></div>
<p>找到并删除旧的内核</p>
<div class="sourceCode" id="cb1985"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1985-1"><a href="chap-linux-command-bash.html#cb1985-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dpkg</span> <span class="at">--list</span> <span class="kw">|</span> <span class="fu">grep</span> linux-image</span>
<span id="cb1985-2"><a href="chap-linux-command-bash.html#cb1985-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get purge linux-image-3.19.0-<span class="dt">{18</span><span class="op">,</span><span class="dt">20</span><span class="op">,</span><span class="dt">21</span><span class="op">,</span><span class="dt">25}</span></span>
<span id="cb1985-3"><a href="chap-linux-command-bash.html#cb1985-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-grub2</span></code></pre></div>
<div class="sourceCode" id="cb1986"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1986-1"><a href="chap-linux-command-bash.html#cb1986-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 搜索</span></span>
<span id="cb1986-2"><a href="chap-linux-command-bash.html#cb1986-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-cache</span> search octave <span class="kw">|</span> <span class="fu">grep</span> octave</span>
<span id="cb1986-3"><a href="chap-linux-command-bash.html#cb1986-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 查询</span></span>
<span id="cb1986-4"><a href="chap-linux-command-bash.html#cb1986-4" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> show octave</span>
<span id="cb1986-5"><a href="chap-linux-command-bash.html#cb1986-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装</span></span>
<span id="cb1986-6"><a href="chap-linux-command-bash.html#cb1986-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install octave</span></code></pre></div>
<div class="sourceCode" id="cb1987"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1987-1"><a href="chap-linux-command-bash.html#cb1987-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install lsb-core</span>
<span id="cb1987-2"><a href="chap-linux-command-bash.html#cb1987-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lsb_release</span> <span class="at">-a</span></span></code></pre></div>
<div class="sourceCode" id="cb1988"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1988-1"><a href="chap-linux-command-bash.html#cb1988-1" aria-hidden="true" tabindex="-1"></a><span class="ex">adduser</span> cloud2016 <span class="co"># 添加用户</span></span>
<span id="cb1988-2"><a href="chap-linux-command-bash.html#cb1988-2" aria-hidden="true" tabindex="-1"></a><span class="fu">passwd</span> cloud2016  <span class="co"># 用户密码设为 cloud</span></span>
<span id="cb1988-3"><a href="chap-linux-command-bash.html#cb1988-3" aria-hidden="true" tabindex="-1"></a><span class="fu">whereis</span> sudoers   <span class="co"># 查找文件位置</span></span>
<span id="cb1988-4"><a href="chap-linux-command-bash.html#cb1988-4" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-v</span> u+w /etc/sudoers <span class="co"># 给文件 sudoers 添加写权限</span></span>
<span id="cb1988-5"><a href="chap-linux-command-bash.html#cb1988-5" aria-hidden="true" tabindex="-1"></a><span class="ex">vim</span> /etc/sudoers <span class="co"># 添加 cloud2016 管理员权限</span></span>
<span id="cb1988-6"><a href="chap-linux-command-bash.html#cb1988-6" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-v</span> u-w /etc/sudoers <span class="co"># 收回权限</span></span></code></pre></div>
<p>安装确认 openssh-server 服务</p>
<div class="sourceCode" id="cb1989"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1989-1"><a href="chap-linux-command-bash.html#cb1989-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install openssh-server</span>
<span id="cb1989-2"><a href="chap-linux-command-bash.html#cb1989-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /etc/init.d/ssh start</span>
<span id="cb1989-3"><a href="chap-linux-command-bash.html#cb1989-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-aux</span> <span class="kw">|</span> <span class="fu">grep</span> ssh</span></code></pre></div>

</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="chap-differential-equations.html"><span class="header-section-number">14</span> 微分方程</a></div>
<div class="next"><a href="references.html">参考文献</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#chap-linux-command-bash"><span class="header-section-number">A</span> 命令行操作</a></li>
<li><a class="nav-link" href="#sec-ls"><span class="header-section-number">A.1</span> 查看文件</a></li>
<li><a class="nav-link" href="#sec-mkdir"><span class="header-section-number">A.2</span> 创建文件夹</a></li>
<li><a class="nav-link" href="#sec-mv"><span class="header-section-number">A.3</span> 移动文件</a></li>
<li><a class="nav-link" href="#sec-du"><span class="header-section-number">A.4</span> 查看文件大小</a></li>
<li><a class="nav-link" href="#sec-shell"><span class="header-section-number">A.5</span> 终端模拟器</a></li>
<li><a class="nav-link" href="#sec-tar"><span class="header-section-number">A.6</span> 压缩和解压缩</a></li>
<li>
<a class="nav-link" href="#repo-install"><span class="header-section-number">A.7</span> 从仓库安装 R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ubuntu"><span class="header-section-number">A.7.1</span> Ubuntu</a></li>
<li><a class="nav-link" href="#centos"><span class="header-section-number">A.7.2</span> CentOS</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#source-install"><span class="header-section-number">A.8</span> 源码安装</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ubuntu-1"><span class="header-section-number">A.8.1</span> Ubuntu</a></li>
<li><a class="nav-link" href="#centos-1"><span class="header-section-number">A.8.2</span> CentOS</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ninja-install"><span class="header-section-number">A.9</span> 忍者安装</a></li>
<li>
<a class="nav-link" href="#settings"><span class="header-section-number">A.10</span> 配置</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#init-session"><span class="header-section-number">A.10.1</span> 初始会话 .Rprofile</a></li>
<li><a class="nav-link" href="#environ-vars"><span class="header-section-number">A.10.2</span> 环境变量 .Renviron</a></li>
<li><a class="nav-link" href="#make-vars"><span class="header-section-number">A.10.3</span> 编译选项 Makevars</a></li>
</ul>
</li>
<li><a class="nav-link" href="#command-line-arguments"><span class="header-section-number">A.11</span> 命令行参数</a></li>
<li><a class="nav-link" href="#sec-build-source-code"><span class="header-section-number">A.12</span> 从源码安装 R</a></li>
<li><a class="nav-link" href="#install-softwares"><span class="header-section-number">A.13</span> 安装软件</a></li>
<li><a class="nav-link" href="#sec-install-r-pkgs"><span class="header-section-number">A.14</span> 安装 R 包</a></li>
<li>
<a class="nav-link" href="#sec-software-manager"><span class="header-section-number">A.15</span> 软件包管理器</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#subsec-dnf-yum"><span class="header-section-number">A.15.1</span> dnf</a></li>
<li><a class="nav-link" href="#subsec-apt-get"><span class="header-section-number">A.15.2</span> apt</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/XiangyunHuang/notesdown/blob/devel/appendix.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/XiangyunHuang/notesdown/edit/devel/appendix.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R 语言学习笔记</strong>" was written by 黄湘云. It was last built on 2023-04-25.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
