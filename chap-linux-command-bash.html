<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>附录 A 命令行操作 | 现代应用统计与 R 语言</title>

    <meta name="author" content="黄湘云" />
  
   <meta name="description" content="线性模型理论及其应用，注意模型的适用范围、参数估计方法、模型检验和诊断，理论和应用并重，同时附以真实的案例分析。将线性模型、广义线性模型、广义可加模型、线性混合效应模型、广义线性混合效应模型和广义可加混合效应模型融合到同一框架下。应用层面，要考虑数据集的平衡问题、缺失问题和异常问题。应用场景包括环境污染、流行病学和风险控制等领域。" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="附录 A 命令行操作 | 现代应用统计与 R 语言" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/cover.png" />
  <meta property="og:description" content="线性模型理论及其应用，注意模型的适用范围、参数估计方法、模型检验和诊断，理论和应用并重，同时附以真实的案例分析。将线性模型、广义线性模型、广义可加模型、线性混合效应模型、广义线性混合效应模型和广义可加混合效应模型融合到同一框架下。应用层面，要考虑数据集的平衡问题、缺失问题和异常问题。应用场景包括环境污染、流行病学和风险控制等领域。" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="附录 A 命令行操作 | 现代应用统计与 R 语言" />
  
  <meta name="twitter:description" content="线性模型理论及其应用，注意模型的适用范围、参数估计方法、模型检验和诊断，理论和应用并重，同时附以真实的案例分析。将线性模型、广义线性模型、广义可加模型、线性混合效应模型、广义线性混合效应模型和广义可加混合效应模型融合到同一框架下。应用层面，要考虑数据集的平衡问题、缺失问题和异常问题。应用场景包括环境污染、流行病学和风险控制等领域。" />
  <meta name="twitter:image" content="/images/cover.png" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat/transition.js"></script>
    <script src="libs/bs3compat/tabs.js"></script>
    <script src="libs/bs3compat/bs3compat.js"></script>
    <link href="libs/bs4_book/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book/bs4_book.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main/plotly-latest.min.js"></script>
    <script src="libs/plotly-locale-zh-CN/zh-cn.js"></script>
    <script src="libs/mathjax/cdn.js"></script>
    <link href="libs/dygraphs/dygraph.css" rel="stylesheet" />
    <script src="libs/dygraphs/dygraph-combined.js"></script>
    <script src="libs/dygraphs/shapes.js"></script>
    <script src="libs/moment/moment.js"></script>
    <script src="libs/moment-timezone/moment-timezone-with-data.js"></script>
    <script src="libs/moment-fquarter/moment-fquarter.min.js"></script>
    <script src="libs/dygraphs-binding/dygraphs.js"></script>
    <script src="libs/Dygraph.Plugins.Unzoom/unzoom.js"></script>
    <script src="libs/echarts4r/echarts-en.min.js"></script>
    <script src="libs/echarts4r/ecStat.min.js"></script>
    <script src="libs/echarts4r/dataTool.min.js"></script>
    <script src="libs/echarts4r-binding/echarts4r.js"></script>
    <script src="libs/d3/d3.min.js"></script>
    <script src="libs/forceNetwork-binding/forceNetwork.js"></script>
    <link href="libs/vis/vis-network.min.css" rel="stylesheet" />
    <script src="libs/vis/vis-network.min.js"></script>
    <script src="libs/visNetwork-binding/visNetwork.js"></script>
    <script src="libs/FileSaver/FileSaver.min.js"></script>
    <script src="libs/Blob/Blob.js"></script>
    <script src="libs/canvas-toBlob/canvas-toBlob.js"></script>
    <script src="libs/html2canvas/html2canvas.js"></script>
    <script src="libs/jspdf/jspdf.debug.js"></script>
    <link href="libs/jquery-sparkline/jquery.sparkline.css" rel="stylesheet" />
    <script src="libs/jquery-sparkline/jquery.sparkline.js"></script>
    <script src="libs/sparkline-binding/sparkline.js"></script>
    <script src="libs/r2d3-render/r2d3-render.js"></script>
    <script src="libs/webcomponents/webcomponents.js"></script>
    <script src="libs/r2d3-binding/r2d3.js"></script>
    <script src="libs/d3v6/d3.min.js"></script>
    <script src="libs/es6shim/es6shim.js"></script>
    <script src="libs/es7shim/es7shim.js"></script>
    <script src="libs/graphre/graphre.js"></script>
    <script src="libs/nomnoml/nomnoml.js"></script>
    <script src="libs/nomnoml-binding/nomnoml.js"></script>
    <script src="libs/d3-bundle/d3-bundle.min.js"></script>
    <script src="libs/d3-lasso/d3-lasso.min.js"></script>
    <script src="libs/save-svg-as-png/save-svg-as-png.min.js"></script>
    <link href="libs/ggiraphjs/ggiraphjs.min.css" rel="stylesheet" />
    <script src="libs/ggiraphjs/ggiraphjs.min.js"></script>
    <script src="libs/girafe-binding/girafe.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <script src="libs/jszip/jszip.min.js"></script>
    <script src="libs/pdfmake/pdfmake.js"></script>
    <script src="libs/pdfmake/vfs_fonts.js"></script>
    <link href="libs/dt-ext-buttons/css/buttons.dataTables.min.css" rel="stylesheet" />
    <script src="libs/dt-ext-buttons/js/dataTables.buttons.min.js"></script>
    <script src="libs/dt-ext-buttons/js/buttons.html5.min.js"></script>
    <script src="libs/dt-ext-buttons/js/buttons.colVis.min.js"></script>
    <script src="libs/dt-ext-buttons/js/buttons.print.min.js"></script>
    <link href="libs/dt-ext-rowgroup/css/rowGroup.dataTables.min.css" rel="stylesheet" />
    <script src="libs/dt-ext-rowgroup/js/dataTables.rowGroup.min.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <script src="libs/echarts-world/world.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-54GQKWF7VP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-54GQKWF7VP');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
    <style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Modern Applied Statistics with R">现代应用统计与 R 语言</a>:
        <small class="text-muted">Modern Applied Statistics with R</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="chap-linux-command-bash" class="section level1" number="37">
<h1><span class="header-section-number">附录 A</span> 命令行操作</h1>
<!-- 提供一个表格左边 R 命令函数，右边系统命令 -->
<p>Bash 文件查找、查看（内容、大小）、移动（重命名）、删除、创建、修改权限</p>
<p>Linux 命令行工具是非常强大的，命令行中的数据科学 <a href="https://www.datascienceatthecommandline.com/" class="uri">https://www.datascienceatthecommandline.com/</a>，Linux 命令行 <a href="https://github.com/jaywcjlove/linux-command" class="uri">https://github.com/jaywcjlove/linux-command</a></p>
<p><a href="https://github.com/trevorld/r-optparse">optparse</a>、<a href="https://github.com/docopt/docopt.R">docopt</a> 、<a href="https://github.com/eddelbuettel/littler">littler</a> 包提供了很多便捷的命令行工具，<a href="https://github.com/jeroen/sys">sys</a>， <a href="https://github.com/r-lib/fs">fs</a> 在 R 中运行操作系统命令</p>
<p>如表<a href="chap-linux-command-bash.html#tab:r-vs-shell">A.1</a>所示，总结了 R 和 Shell 命令的等价表示，下面以 <code>list.files()</code> 和 <code>ls</code> 为例，介绍其等价的内容</p>
<table>
<caption><span id="tab:r-vs-shell">表 A.1: </span> R 和 Shell 命令的等价表示 <a href="#fn81" class="footnote-ref" id="fnref81"><sup>81</sup></a></caption>
<thead>
<tr class="header">
<th align="left"></th>
<th>R</th>
<th align="left">Shell</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">查看文件</td>
<td><code>list.files()</code></td>
<td align="left"><code>ls</code></td>
</tr>
<tr class="even">
<td align="left">查看目录</td>
<td><code>list.dirs()</code></td>
<td align="left"><code>dir</code></td>
</tr>
<tr class="odd">
<td align="left">目录层次</td>
<td><code>fs::dir_tree()</code></td>
<td align="left"><code>tree</code></td>
</tr>
</tbody>
</table>
<div id="sec-ls" class="section level2" number="37.1">
<h2><span class="header-section-number">A.1</span> 查看文件</h2>
<p><code>ls</code>/<code>mkdir</code>/<code>mv</code>/<code>du</code></p>
<p>查看文件</p>
<pre><code>```bash
ls -a
```

列出目录下所有文件

```bash
ls -1 
```

一行显示一个文件或文件夹

```bash
ls -l 
```

按从 aA-zZ 的顺序列出所有文件以及所属权限

```bash
ls -rl 
```

相比于 `ls -l` 文件是逆序排列

```bash
ls -lh
```

列出文件或文件夹（不包含子文件夹）的大小 

```bash
ls -ld 
```

列出当前目录本身，而不是其所包含的内容</code></pre>
</div>
<div id="sec-mkdir" class="section level2" number="37.2">
<h2><span class="header-section-number">A.2</span> 创建文件夹</h2>
<pre><code>```bash
mkdir images
```

创建文件用 `touch` 如 `touch .Rprofile` 

```bash
# 删除文件夹及子文件夹，递归删除
rm -rf images/
# 删除文件
rm .Rprofile
```</code></pre>
</div>
<div id="sec-mv" class="section level2" number="37.3">
<h2><span class="header-section-number">A.3</span> 移动文件</h2>
<pre><code>在当前目录下

```bash
# 移动文件夹 images 下的所有文件到 figures 文件夹下
mv images/* figures/
# images 文件夹移动到 figures 文件夹下
mv images/ figures/
# 移动特定的文件
mv images/*.png figures/
```

同一目录下有两个文件 `R-3.5.1.tar.gz` 未下载完整 和 `R-3.5.1.tar.gz.1` 完全下载

```bash
# 删除 R-3.5.1.tar.gz
rm R-3.5.1.tar.gz
# 重命名 R-3.5.1.tar.gz.1 
mv R-3.5.1.tar.gz.1  R-3.5.1.tar.gz
```</code></pre>
</div>
<div id="sec-du" class="section level2" number="37.4">
<h2><span class="header-section-number">A.4</span> 查看文件大小</h2>
<pre><code>当前目录下各文件夹的大小， `-h` 表示人类（相对于机器来说）可读的方式显示，如 Kb、Mb、Gb，`-d` 表示目录深度 `du --human-readable --max-depth=1 ./`

```bash
du -h -d 1 ./
```

```bash
# 对当前目录下的文件/夹 按大小排序
du -sh * | sort -nr
```</code></pre>
</div>
<div id="sec-shell" class="section level2" number="37.5">
<h2><span class="header-section-number">A.5</span> 终端模拟器</h2>
<p><a href="https://ohmyz.sh/">oh-my-zsh</a> 是 <a href="https://www.zsh.org/">Z Shell</a> 扩展，开发在 Github 上 <a href="https://github.com/ohmyzsh/ohmyzsh" class="uri">https://github.com/ohmyzsh/ohmyzsh</a>。</p>
<p>zsh 相比于 bash， 在语法高亮、自动补全等方面有优势</p>
<div class="sourceCode" id="cb2649"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2649-1"><a href="chap-linux-command-bash.html#cb2649-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> zsh</span>
<span id="cb2649-2"><a href="chap-linux-command-bash.html#cb2649-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sh</span> <span class="at">-c</span> <span class="st">&quot;</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-fsSL</span> https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<p>RStudio 集成的终端支持 Zsh，操作路径 Tools -&gt; Global Options -&gt; Terminal， 见图 <a href="chap-linux-command-bash.html#fig:zsh-rstudio">A.1</a></p>
<div class="figure"><span style="display:block;" id="fig:zsh-rstudio"></span>
<img src="screenshots/zsh-rstudio.png" style="width:75.0%" alt="" />
<p class="caption">图 A.1:  RStudio IDE 集成的 Zsh 终端模拟器</p>
</div>
</div>
<div id="sec-tar" class="section level2" number="37.6">
<h2><span class="header-section-number">A.6</span> 压缩和解压缩</h2>
<p>最常见的压缩文件格式有 <code>.tar</code>、<code>.tar.gz</code>、<code>.tar.bz2</code>、<code>.zip</code> 和 <code>.rar</code>，分别对应于 Tar <a href="https://www.gnu.org/software/tar/" class="uri">https://www.gnu.org/software/tar/</a>、 Gzip <a href="https://www.gzip.org/" class="uri">https://www.gzip.org/</a> 、 Bzip2 <a href="https://www.bzip.org/" class="uri">https://www.bzip.org/</a> 、 UnZip/Zip <a href="http://www.info-zip.org" class="uri">http://www.info-zip.org</a> 和 WinRAR <a href="https://www.rarlab.com/" class="uri">https://www.rarlab.com/</a>。 Tar 提供了基本的打包和解包工具，Gzip 和 Bzip2 在 Tar 打包的基础上提供了压缩功能， UnZip/Zip 是兼容 Windows 原生压缩/解压缩功能的程序，WinRAR 是广泛流行于 Windows 系统的压缩/解压缩收费软件，除了 WinRAR，其它都是免费甚至开源软件。 下面以 <code>.tar.gz</code> 和<code>.tar.bz2</code> 两种格式的压缩文件为例，介绍文件压缩和解压缩的操作，其它文件格式的操作类似<a href="#fn82" class="footnote-ref" id="fnref82"><sup>82</sup></a>。WinRAR <a href="https://www.rarlab.com/" class="uri">https://www.rarlab.com/</a> 是收费的压缩和解压缩工具，也支持 Linux 和 macOS 系统，鉴于它是收费软件，这里就不多展开介绍了，详情请见官网。</p>
<div class="columns">
<div class="column" style="width:47.5%;">
<div class="sourceCode" id="cb2650"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2650-1"><a href="chap-linux-command-bash.html#cb2650-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> tar gzip zip unzip </span>
<span id="cb2650-2"><a href="chap-linux-command-bash.html#cb2650-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 将目录 ~/tmp 压缩成文件 filename.tar.gz</span></span>
<span id="cb2650-3"><a href="chap-linux-command-bash.html#cb2650-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-czf</span> <span class="pp">**</span>.tar.gz ~/tmp</span>
<span id="cb2650-4"><a href="chap-linux-command-bash.html#cb2650-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 将文件 filename.tar.gz 解压到目录 ~/tmp</span></span>
<span id="cb2650-5"><a href="chap-linux-command-bash.html#cb2650-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xzf</span> <span class="pp">**</span>.tar.gz <span class="at">-C</span> ~/tmp</span></code></pre></div>
</div><div class="column" style="width:5%;">
<p> 
<!-- an empty Div (with a white space), serving as
a column separator --></p>
</div><div class="column" style="width:47.5%;">
<div class="sourceCode" id="cb2651"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2651-1"><a href="chap-linux-command-bash.html#cb2651-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> bzip2</span>
<span id="cb2651-2"><a href="chap-linux-command-bash.html#cb2651-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 将目录 ~/tmp 压缩成文件 filename.tar.bz2</span></span>
<span id="cb2651-3"><a href="chap-linux-command-bash.html#cb2651-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-cjf</span> filename.tar.bz2 ~/tmp</span>
<span id="cb2651-4"><a href="chap-linux-command-bash.html#cb2651-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 将文件 filename.tar.bz2 解压到目录 ~/tmp</span></span>
<span id="cb2651-5"><a href="chap-linux-command-bash.html#cb2651-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xjf</span> filename.tar.bz2 <span class="at">-C</span> ~/tmp</span></code></pre></div>
</div>
</div>
<p>解压不带 tar 的 .gz 文件，比如 <a href="http://www-cs-faculty.stanford.edu/~knuth/tex.eps.gz">tex.eps.gz</a> 解压后变成 tex.eps</p>
<div class="sourceCode" id="cb2652"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2652-1"><a href="chap-linux-command-bash.html#cb2652-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gzip</span> filename.gz <span class="at">-d</span> ~/tmp</span></code></pre></div>
</div>
<div id="repo-install" class="section level2" number="37.7">
<h2><span class="header-section-number">A.7</span> 从仓库安装 R</h2>
<div id="ubuntu" class="section level3" number="37.7.1">
<h3><span class="header-section-number">A.7.1</span> Ubuntu</h3>
<p>安装 openssh zsh 和 Git</p>
<div class="sourceCode" id="cb2653"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2653-1"><a href="chap-linux-command-bash.html#cb2653-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install zsh openssh-server</span>
<span id="cb2653-2"><a href="chap-linux-command-bash.html#cb2653-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:git-core/ppa</span>
<span id="cb2653-3"><a href="chap-linux-command-bash.html#cb2653-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt install git</span>
<span id="cb2653-4"><a href="chap-linux-command-bash.html#cb2653-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sh</span> <span class="at">-c</span> <span class="st">&quot;</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-fsSL</span> https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<p>只考虑最新的 Ubuntu 18.04 因为本书写成的时候，该版本应该已经大规模使用了，默认版本的安装和之前版本的安装就不再展示了。安装最新版 R-3.5.x，无论安装哪个版本，都要先导入密钥</p>
<div class="sourceCode" id="cb2654"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2654-1"><a href="chap-linux-command-bash.html#cb2654-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-key adv <span class="at">--keyserver</span> hkp://keyserver.ubuntu.com:80 <span class="at">--recv</span> E084DAB9</span></code></pre></div>
<ul>
<li><p>Ubuntu 14.04.5 提供的默认版本 R 3.0.2，安装 R 3.5.x 系列之前的版本，如 R 3.4.4</p>
<div class="sourceCode" id="cb2655"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2655-1"><a href="chap-linux-command-bash.html#cb2655-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">&quot;deb http://cran.rstudio.com/bin/linux/ubuntu </span><span class="kw">`</span><span class="ex">lsb_release</span> <span class="at">-cs</span><span class="kw">`</span><span class="st">/&quot;</span></span>
<span id="cb2655-2"><a href="chap-linux-command-bash.html#cb2655-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-base-dev</span></code></pre></div>
<p>添加完仓库后，都需要更新源<code>sudo apt-get update</code>，安装 R 3.5.x 系列最新版</p>
<div class="sourceCode" id="cb2656"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2656-1"><a href="chap-linux-command-bash.html#cb2656-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">&quot;deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu trusty-cran35/&quot;</span></span></code></pre></div></li>
<li><p>Ubuntu 16.04.5 提供的默认版本 R 3.4.4，这是 R 3.4.x 系列的最新版，安装目前最新的 R 3.5.x 版本需要</p>
<div class="sourceCode" id="cb2657"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2657-1"><a href="chap-linux-command-bash.html#cb2657-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">&quot;deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu xenial-cran35/&quot;</span></span></code></pre></div></li>
<li><p>Ubuntu 18.04.1 提供的默认版本 R 3.4.4，安装目前的最新版本需要</p>
<div class="sourceCode" id="cb2658"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2658-1"><a href="chap-linux-command-bash.html#cb2658-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-add-repository <span class="at">-y</span> <span class="st">&quot;deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu bionic-cran35/&quot;</span></span></code></pre></div>
<p>接下来安装 R，详细安装指导见 <a href="https://cran.r-project.org/bin/linux/debian/index.html">CRAN 官网</a>。</p>
<div class="sourceCode" id="cb2659"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2659-1"><a href="chap-linux-command-bash.html#cb2659-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-base-dev</span></code></pre></div>
<p>Michael Rutter 维护了编译好的二进制版本 <a href="https://launchpad.net/~marutter" class="uri">https://launchpad.net/~marutter</a>，比如 rstan 包可以通过安装 r-cran-rstan 完成</p>
<div class="sourceCode" id="cb2660"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2660-1"><a href="chap-linux-command-bash.html#cb2660-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R packages for Ubuntu LTS. Based on CRAN Task Views.</span></span>
<span id="cb2660-2"><a href="chap-linux-command-bash.html#cb2660-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:marutter/c2d4u3.5</span>
<span id="cb2660-3"><a href="chap-linux-command-bash.html#cb2660-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-cran-rstan</span></code></pre></div></li>
</ul>
</div>
<div id="centos" class="section level3" number="37.7.2">
<h3><span class="header-section-number">A.7.2</span> CentOS</h3>
<p>同样适用于 Fedora</p>
<p>安装指导<a href="#fn83" class="footnote-ref" id="fnref83"><sup>83</sup></a></p>
</div>
</div>
<div id="source-install" class="section level2" number="37.8">
<h2><span class="header-section-number">A.8</span> 源码安装</h2>
<div id="ubuntu-1" class="section level3" number="37.8.1">
<h3><span class="header-section-number">A.8.1</span> Ubuntu</h3>
<ol style="list-style-type: decimal">
<li>首先启用源码仓库，否则执行 <code>sudo apt-get build-dep r-base</code> 会报如下错误</li>
</ol>
<pre><code>E: You must put some &#39;source&#39; URIs in your sources.list</code></pre>
<div class="sourceCode" id="cb2662"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2662-1"><a href="chap-linux-command-bash.html#cb2662-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> sed <span class="at">-i</span> <span class="at">--</span> <span class="st">&#39;s/#deb-src/deb-src/g&#39;</span> /etc/apt/sources.list <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> sed <span class="at">-i</span> <span class="at">--</span> <span class="st">&#39;s/# deb-src/deb-src/g&#39;</span> /etc/apt/sources.list</span>
<span id="cb2662-2"><a href="chap-linux-command-bash.html#cb2662-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>安装编译 R 所需的系统依赖</li>
</ol>
<div class="sourceCode" id="cb2663"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2663-1"><a href="chap-linux-command-bash.html#cb2663-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get build-dep r-base-dev</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>编译安装 R</li>
</ol>
<div class="sourceCode" id="cb2664"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2664-1"><a href="chap-linux-command-bash.html#cb2664-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span></span>
<span id="cb2664-2"><a href="chap-linux-command-bash.html#cb2664-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="fu">make</span> install </span></code></pre></div>
<ol style="list-style-type: decimal">
<li>自定义编译选项</li>
</ol>
<div class="sourceCode" id="cb2665"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2665-1"><a href="chap-linux-command-bash.html#cb2665-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--help</span></span></code></pre></div>
</div>
<div id="centos-1" class="section level3" number="37.8.2">
<h3><span class="header-section-number">A.8.2</span> CentOS</h3>
<p>基于 CentOS 7 和 GCC 4.8.5，参考 R-admin 手册</p>
<ul>
<li><p>下载源码包</p>
<p>最新发布的稳定版</p>
<div class="sourceCode" id="cb2666"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2666-1"><a href="chap-linux-command-bash.html#cb2666-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fLo</span> ./R-latest.tar.gz https://mirrors.tuna.tsinghua.edu.cn/CRAN/src/base/R-latest.tar.gz</span></code></pre></div>
<pre><code>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
 10 28.7M   10 3232k    0     0   107k      0  0:04:34  0:00:30  0:04:04  118k</code></pre></li>
<li><p>安装依赖</p>
<div class="sourceCode" id="cb2668"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2668-1"><a href="chap-linux-command-bash.html#cb2668-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> yum-utils epel-release <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> yum-builddep R-devel</span>
<span id="cb2668-2"><a href="chap-linux-command-bash.html#cb2668-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> dnf builddep R-devel <span class="co"># Fedora 30</span></span></code></pre></div></li>
<li><p>解压配置</p>
<div class="sourceCode" id="cb2669"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2669-1"><a href="chap-linux-command-bash.html#cb2669-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> R-latest <span class="kw">&amp;&amp;</span> <span class="fu">tar</span> <span class="at">-xzf</span> ./R-latest.tar.gz <span class="at">-C</span> ./R-latest <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> R-3.5.2</span>
<span id="cb2669-2"><a href="chap-linux-command-bash.html#cb2669-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2669-3"><a href="chap-linux-command-bash.html#cb2669-3" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb2669-4"><a href="chap-linux-command-bash.html#cb2669-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span></span></code></pre></div>
<div class="sourceCode" id="cb2670"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2670-1"><a href="chap-linux-command-bash.html#cb2670-1" aria-hidden="true" tabindex="-1"></a>R is now configured for x86_64-pc-linux-gnu</span>
<span id="cb2670-2"><a href="chap-linux-command-bash.html#cb2670-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2670-3"><a href="chap-linux-command-bash.html#cb2670-3" aria-hidden="true" tabindex="-1"></a>  Source directory:          .</span>
<span id="cb2670-4"><a href="chap-linux-command-bash.html#cb2670-4" aria-hidden="true" tabindex="-1"></a>  Installation directory:    /usr/local</span>
<span id="cb2670-5"><a href="chap-linux-command-bash.html#cb2670-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2670-6"><a href="chap-linux-command-bash.html#cb2670-6" aria-hidden="true" tabindex="-1"></a>  C compiler:                gcc -std=gnu99  -g -O2</span>
<span id="cb2670-7"><a href="chap-linux-command-bash.html#cb2670-7" aria-hidden="true" tabindex="-1"></a>  Fortran 77 compiler:       gfortran  -g -O2</span>
<span id="cb2670-8"><a href="chap-linux-command-bash.html#cb2670-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2670-9"><a href="chap-linux-command-bash.html#cb2670-9" aria-hidden="true" tabindex="-1"></a>  Default C++ compiler:      g++   -g -O2</span>
<span id="cb2670-10"><a href="chap-linux-command-bash.html#cb2670-10" aria-hidden="true" tabindex="-1"></a>  C++98 compiler:            g++ -std=gnu++98 -g -O2</span>
<span id="cb2670-11"><a href="chap-linux-command-bash.html#cb2670-11" aria-hidden="true" tabindex="-1"></a>  C++11 compiler:            g++ -std=gnu++11 -g -O2</span>
<span id="cb2670-12"><a href="chap-linux-command-bash.html#cb2670-12" aria-hidden="true" tabindex="-1"></a>  C++14 compiler:</span>
<span id="cb2670-13"><a href="chap-linux-command-bash.html#cb2670-13" aria-hidden="true" tabindex="-1"></a>  C++17 compiler:</span>
<span id="cb2670-14"><a href="chap-linux-command-bash.html#cb2670-14" aria-hidden="true" tabindex="-1"></a>  Fortran 90/95 compiler:    gfortran -g -O2</span>
<span id="cb2670-15"><a href="chap-linux-command-bash.html#cb2670-15" aria-hidden="true" tabindex="-1"></a>  Obj-C compiler:            gcc -g -O2 -fobjc-exceptions</span>
<span id="cb2670-16"><a href="chap-linux-command-bash.html#cb2670-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2670-17"><a href="chap-linux-command-bash.html#cb2670-17" aria-hidden="true" tabindex="-1"></a>  Interfaces supported:      X11, tcltk</span>
<span id="cb2670-18"><a href="chap-linux-command-bash.html#cb2670-18" aria-hidden="true" tabindex="-1"></a>  External libraries:        readline, curl</span>
<span id="cb2670-19"><a href="chap-linux-command-bash.html#cb2670-19" aria-hidden="true" tabindex="-1"></a>  Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo, ICU</span>
<span id="cb2670-20"><a href="chap-linux-command-bash.html#cb2670-20" aria-hidden="true" tabindex="-1"></a>  Options enabled:           shared R library, shared BLAS, R profiling, memory profiling</span>
<span id="cb2670-21"><a href="chap-linux-command-bash.html#cb2670-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2670-22"><a href="chap-linux-command-bash.html#cb2670-22" aria-hidden="true" tabindex="-1"></a>  Capabilities skipped:</span>
<span id="cb2670-23"><a href="chap-linux-command-bash.html#cb2670-23" aria-hidden="true" tabindex="-1"></a>  Options not enabled:</span>
<span id="cb2670-24"><a href="chap-linux-command-bash.html#cb2670-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2670-25"><a href="chap-linux-command-bash.html#cb2670-25" aria-hidden="true" tabindex="-1"></a>  Recommended packages:      yes</span></code></pre></div></li>
<li><p>编译安装</p>
<div class="sourceCode" id="cb2671"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2671-1"><a href="chap-linux-command-bash.html#cb2671-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="at">-j</span> 2 all</span>
<span id="cb2671-2"><a href="chap-linux-command-bash.html#cb2671-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> make install</span></code></pre></div></li>
<li><p>BLAS 加持（可选）</p>
<p>BLAS 对于加快矩阵计算至关重要，编译 R 带 <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#BLAS">BLAS 支持</a>，添加 OpenBLAS 支持 <code>--with-blas="-lopenblas"</code> 或 ATLAS 支持 <code>--with-blas="-L/usr/lib64/atlas -lsatlas"</code></p>
<div class="sourceCode" id="cb2672"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2672-1"><a href="chap-linux-command-bash.html#cb2672-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> openblas openblas-threads openblas-openmp </span>
<span id="cb2672-2"><a href="chap-linux-command-bash.html#cb2672-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2672-3"><a href="chap-linux-command-bash.html#cb2672-3" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb2672-4"><a href="chap-linux-command-bash.html#cb2672-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span> <span class="dt">\</span></span>
<span id="cb2672-5"><a href="chap-linux-command-bash.html#cb2672-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--with-blas</span><span class="op">=</span><span class="st">&quot;-lopenblas&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb2673"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2673-1"><a href="chap-linux-command-bash.html#cb2673-1" aria-hidden="true" tabindex="-1"></a>R is now configured for x86_64-pc-linux-gnu</span>
<span id="cb2673-2"><a href="chap-linux-command-bash.html#cb2673-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2673-3"><a href="chap-linux-command-bash.html#cb2673-3" aria-hidden="true" tabindex="-1"></a>Source directory:          .</span>
<span id="cb2673-4"><a href="chap-linux-command-bash.html#cb2673-4" aria-hidden="true" tabindex="-1"></a>Installation directory:    /usr/local</span>
<span id="cb2673-5"><a href="chap-linux-command-bash.html#cb2673-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2673-6"><a href="chap-linux-command-bash.html#cb2673-6" aria-hidden="true" tabindex="-1"></a>C compiler:                gcc -std=gnu99  -g -O2</span>
<span id="cb2673-7"><a href="chap-linux-command-bash.html#cb2673-7" aria-hidden="true" tabindex="-1"></a>Fortran 77 compiler:       gfortran  -g -O2</span>
<span id="cb2673-8"><a href="chap-linux-command-bash.html#cb2673-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2673-9"><a href="chap-linux-command-bash.html#cb2673-9" aria-hidden="true" tabindex="-1"></a>Default C++ compiler:      g++   -g -O2</span>
<span id="cb2673-10"><a href="chap-linux-command-bash.html#cb2673-10" aria-hidden="true" tabindex="-1"></a>C++98 compiler:            g++ -std=gnu++98 -g -O2</span>
<span id="cb2673-11"><a href="chap-linux-command-bash.html#cb2673-11" aria-hidden="true" tabindex="-1"></a>C++11 compiler:            g++ -std=gnu++11 -g -O2</span>
<span id="cb2673-12"><a href="chap-linux-command-bash.html#cb2673-12" aria-hidden="true" tabindex="-1"></a>C++14 compiler:</span>
<span id="cb2673-13"><a href="chap-linux-command-bash.html#cb2673-13" aria-hidden="true" tabindex="-1"></a>C++17 compiler:</span>
<span id="cb2673-14"><a href="chap-linux-command-bash.html#cb2673-14" aria-hidden="true" tabindex="-1"></a>Fortran 90/95 compiler:    gfortran -g -O2</span>
<span id="cb2673-15"><a href="chap-linux-command-bash.html#cb2673-15" aria-hidden="true" tabindex="-1"></a>Obj-C compiler:            gcc -g -O2 -fobjc-exceptions</span>
<span id="cb2673-16"><a href="chap-linux-command-bash.html#cb2673-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2673-17"><a href="chap-linux-command-bash.html#cb2673-17" aria-hidden="true" tabindex="-1"></a>Interfaces supported:      X11, tcltk</span>
<span id="cb2673-18"><a href="chap-linux-command-bash.html#cb2673-18" aria-hidden="true" tabindex="-1"></a>External libraries:        readline, **BLAS(OpenBLAS)**, curl</span>
<span id="cb2673-19"><a href="chap-linux-command-bash.html#cb2673-19" aria-hidden="true" tabindex="-1"></a>Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo, ICU</span>
<span id="cb2673-20"><a href="chap-linux-command-bash.html#cb2673-20" aria-hidden="true" tabindex="-1"></a>Options enabled:           shared R library, shared BLAS, R profiling, memory profiling</span>
<span id="cb2673-21"><a href="chap-linux-command-bash.html#cb2673-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2673-22"><a href="chap-linux-command-bash.html#cb2673-22" aria-hidden="true" tabindex="-1"></a>Capabilities skipped:</span>
<span id="cb2673-23"><a href="chap-linux-command-bash.html#cb2673-23" aria-hidden="true" tabindex="-1"></a>Options not enabled:</span>
<span id="cb2673-24"><a href="chap-linux-command-bash.html#cb2673-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2673-25"><a href="chap-linux-command-bash.html#cb2673-25" aria-hidden="true" tabindex="-1"></a>Recommended packages:      yes</span></code></pre></div>
<p>配置成功的标志，如 OpenBLAS</p>
<pre><code>checking for dgemm_ in -lopenblas... yes
checking whether double complex BLAS can be used... yes
checking whether the BLAS is complete... yes</code></pre>
<p>ATLAS 加持</p>
<div class="sourceCode" id="cb2675"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2675-1"><a href="chap-linux-command-bash.html#cb2675-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> atlas</span>
<span id="cb2675-2"><a href="chap-linux-command-bash.html#cb2675-2" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb2675-3"><a href="chap-linux-command-bash.html#cb2675-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span> <span class="dt">\</span></span>
<span id="cb2675-4"><a href="chap-linux-command-bash.html#cb2675-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--with-blas</span><span class="op">=</span><span class="st">&quot;-L/usr/lib64/atlas -lsatlas&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb2676"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2676-1"><a href="chap-linux-command-bash.html#cb2676-1" aria-hidden="true" tabindex="-1"></a>R is now configured for x86_64-pc-linux-gnu</span>
<span id="cb2676-2"><a href="chap-linux-command-bash.html#cb2676-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2676-3"><a href="chap-linux-command-bash.html#cb2676-3" aria-hidden="true" tabindex="-1"></a>Source directory:          .</span>
<span id="cb2676-4"><a href="chap-linux-command-bash.html#cb2676-4" aria-hidden="true" tabindex="-1"></a>Installation directory:    /usr/local</span>
<span id="cb2676-5"><a href="chap-linux-command-bash.html#cb2676-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2676-6"><a href="chap-linux-command-bash.html#cb2676-6" aria-hidden="true" tabindex="-1"></a>C compiler:                gcc -std=gnu99  -g -O2</span>
<span id="cb2676-7"><a href="chap-linux-command-bash.html#cb2676-7" aria-hidden="true" tabindex="-1"></a>Fortran 77 compiler:       gfortran  -g -O2</span>
<span id="cb2676-8"><a href="chap-linux-command-bash.html#cb2676-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2676-9"><a href="chap-linux-command-bash.html#cb2676-9" aria-hidden="true" tabindex="-1"></a>Default C++ compiler:      g++   -g -O2</span>
<span id="cb2676-10"><a href="chap-linux-command-bash.html#cb2676-10" aria-hidden="true" tabindex="-1"></a>C++98 compiler:            g++ -std=gnu++98 -g -O2</span>
<span id="cb2676-11"><a href="chap-linux-command-bash.html#cb2676-11" aria-hidden="true" tabindex="-1"></a>C++11 compiler:            g++ -std=gnu++11 -g -O2</span>
<span id="cb2676-12"><a href="chap-linux-command-bash.html#cb2676-12" aria-hidden="true" tabindex="-1"></a>C++14 compiler:</span>
<span id="cb2676-13"><a href="chap-linux-command-bash.html#cb2676-13" aria-hidden="true" tabindex="-1"></a>C++17 compiler:</span>
<span id="cb2676-14"><a href="chap-linux-command-bash.html#cb2676-14" aria-hidden="true" tabindex="-1"></a>Fortran 90/95 compiler:    gfortran -g -O2</span>
<span id="cb2676-15"><a href="chap-linux-command-bash.html#cb2676-15" aria-hidden="true" tabindex="-1"></a>Obj-C compiler:            gcc -g -O2 -fobjc-exceptions</span>
<span id="cb2676-16"><a href="chap-linux-command-bash.html#cb2676-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2676-17"><a href="chap-linux-command-bash.html#cb2676-17" aria-hidden="true" tabindex="-1"></a>Interfaces supported:      X11, tcltk</span>
<span id="cb2676-18"><a href="chap-linux-command-bash.html#cb2676-18" aria-hidden="true" tabindex="-1"></a>External libraries:        readline, **BLAS(generic)**, curl</span>
<span id="cb2676-19"><a href="chap-linux-command-bash.html#cb2676-19" aria-hidden="true" tabindex="-1"></a>Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo, ICU</span>
<span id="cb2676-20"><a href="chap-linux-command-bash.html#cb2676-20" aria-hidden="true" tabindex="-1"></a>Options enabled:           shared R library, shared BLAS, R profiling, memory profiling</span>
<span id="cb2676-21"><a href="chap-linux-command-bash.html#cb2676-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2676-22"><a href="chap-linux-command-bash.html#cb2676-22" aria-hidden="true" tabindex="-1"></a>Capabilities skipped:</span>
<span id="cb2676-23"><a href="chap-linux-command-bash.html#cb2676-23" aria-hidden="true" tabindex="-1"></a>Options not enabled:</span>
<span id="cb2676-24"><a href="chap-linux-command-bash.html#cb2676-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2676-25"><a href="chap-linux-command-bash.html#cb2676-25" aria-hidden="true" tabindex="-1"></a>Recommended packages:      yes</span></code></pre></div>
<p>ATLAS 配置成功</p>
<pre><code>checking for dgemm_ in -L/usr/lib64/atlas -lsatlas... yes
checking whether double complex BLAS can be used... yes
checking whether the BLAS is complete... yes</code></pre></li>
</ul>
<p>后续步骤同上</p>
</div>
</div>
<div id="ninja-install" class="section level2" number="37.9">
<h2><span class="header-section-number">A.9</span> 忍者安装</h2>
<p>从源码自定义安装：加速 Intel MKL 和 大文件支持</p>
<p><a href="https://software.intel.com/en-us/articles/using-intel-mkl-with-r" class="uri">https://software.intel.com/en-us/articles/using-intel-mkl-with-r</a></p>
</div>
<div id="settings" class="section level2" number="37.10">
<h2><span class="header-section-number">A.10</span> 配置</h2>
<div id="init-session" class="section level3" number="37.10.1">
<h3><span class="header-section-number">A.10.1</span> 初始会话 <code>.Rprofile</code></h3>
<p><code>.Rprofile</code> 文件位于 <code>~/</code> 目录下或者 R 项目的根目录下</p>
<p>查看帮助 <code>?.Rprofile</code></p>
<p>更多配置设置 <a href="https://github.com/HenrikBengtsson/startup">startup</a></p>
</div>
<div id="environ-vars" class="section level3" number="37.10.2">
<h3><span class="header-section-number">A.10.2</span> 环境变量 <code>.Renviron</code></h3>
<p><code>.Renviron</code> 文件位于 <code>~/</code> 目录下</p>
</div>
<div id="make-vars" class="section level3" number="37.10.3">
<h3><span class="header-section-number">A.10.3</span> 编译选项 <code>Makevars</code></h3>
<p><code>Makevars</code> 文件位于 <code>~/.R/</code> 目录下</p>
</div>
</div>
<div id="command-line-arguments" class="section level2" number="37.11">
<h2><span class="header-section-number">A.11</span> 命令行参数</h2>
<p><code>commandArgs</code> 从终端命令行中传递参数</p>
<ul>
<li><a href="https://github.com/mdequeljoe/rdoc">rdoc</a> 高亮 R 帮助文档中的 R 函数、关键字 <code>NULL</code>。启用需要在R控制台中执行 <code>rdoc::use_rdoc()</code></li>
<li><a href="https://github.com/randy3k/radian">radian</a> 代码自动补全和语法高亮，进入 R 控制台，终端中输入<code>radian</code></li>
<li><a href="https://github.com/docopt/docopt.R">docopt</a> 提供R命令行工具，如 <a href="https://github.com/eddelbuettel/littler">littler</a> 包，<a href="https://github.com/trevorld/r-getopt">getopt</a> 从终端命令行接受参数</li>
<li><a href="https://github.com/trevorld/r-optparse">optparse</a> 命令行选项参数的解析器</li>
</ul>
<p>安装完 R-littler R-littler-examples (centos) 或 littler r-cran-littler (ubuntu) 后，执行</p>
<div class="sourceCode" id="cb2678"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2678-1"><a href="chap-linux-command-bash.html#cb2678-1" aria-hidden="true" tabindex="-1"></a><span class="co"># centos</span></span>
<span id="cb2678-2"><a href="chap-linux-command-bash.html#cb2678-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/install.r /usr/bin/install.r </span>
<span id="cb2678-3"><a href="chap-linux-command-bash.html#cb2678-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/install2.r /usr/bin/install2.r</span>
<span id="cb2678-4"><a href="chap-linux-command-bash.html#cb2678-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/installGithub.r /usr/bin/installGithub.r </span>
<span id="cb2678-5"><a href="chap-linux-command-bash.html#cb2678-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib64/R/library/littler/examples/testInstalled.r /usr/bin/testInstalled.r</span>
<span id="cb2678-6"><a href="chap-linux-command-bash.html#cb2678-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ubuntu</span></span>
<span id="cb2678-7"><a href="chap-linux-command-bash.html#cb2678-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/install.r /usr/bin/install.r </span>
<span id="cb2678-8"><a href="chap-linux-command-bash.html#cb2678-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/install2.r /usr/bin/install2.r</span>
<span id="cb2678-9"><a href="chap-linux-command-bash.html#cb2678-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/installGithub.r /usr/bin/installGithub.r </span>
<span id="cb2678-10"><a href="chap-linux-command-bash.html#cb2678-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /usr/lib/R/site-library/littler/examples/testInstalled.r /usr/bin/testInstalled.r</span></code></pre></div>
<p>这样可以载终端中安装 R 包了</p>
<div class="sourceCode" id="cb2679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2679-1"><a href="chap-linux-command-bash.html#cb2679-1" aria-hidden="true" tabindex="-1"></a>install.r docopt</span></code></pre></div>
<pre><code>#!/usr/bin/env Rscript
# 安装 optparse 提供更加灵活的传参方式
# 也可参考 littler https://github.com/eddelbuettel/littler
# if(&quot;optparse&quot; %in% .packages(TRUE)) install.packages(&#39;optparse&#39;,repos = &quot;https://cran.rstudio.com&quot;)
# https://cran.r-project.org/doc/manuals/R-intro.html#Invoking-R-from-the-command-line
# http://www.cureffi.org/2014/01/15/running-r-batch-mode-linux/
args = commandArgs(trailingOnly=TRUE)

# 函数功能：在浏览器中同时打开多个 PDF 文档
open_pdf &lt;- function(pdf_path = &quot;./figures/&quot;, n = 1) {
  # pdf_path:     PDF文件所在目录
  # n:            默认打开1个PDF文档
  # PDF文档目录
  pdfs &lt;- list.files(pdf_path, pattern = &#39;\\.pdf$&#39;)
  # PDF 文档路径
  path_to_pdfs &lt;- paste(pdf_path, pdfs, sep = .Platform$file.sep)
  # 打开 PDF 文档
  invisible(lapply(head(path_to_pdfs, n), browseURL))
}

open_pdf(pdf_path, n = args[1])

# 使用： Rscript --vanilla code/batch-open-pdf.R 20</code></pre>
</div>
<div id="sec-build-source-code" class="section level2" number="37.12">
<h2><span class="header-section-number">A.12</span> 从源码安装 R</h2>
<p>从源码编译 R 的需求大概有以下几点：</p>
<ol style="list-style-type: decimal">
<li>爱折腾的极客：玩配置，学习 make 相关工具和 Linux 世界的依赖</li>
<li>追求性能：如 <a href="http://users.suse.com/~aj/linux_lfs.html">LFS 支持</a> 和 <a href="http://dirk.eddelbuettel.com/blog/2018/04/15/#018_mkl_for_debian_ubuntu">Intel MKL 加速</a></li>
<li>环境限制：CentOS 或者红帽系统，自带的 R 版本比较落后</li>
</ol>
<div class="sourceCode" id="cb2681"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2681-1"><a href="chap-linux-command-bash.html#cb2681-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span>/opt/R/R-devel <span class="dt">\</span></span>
<span id="cb2681-2"><a href="chap-linux-command-bash.html#cb2681-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-R-shlib</span> <span class="at">--enable-byte-compiled-packages</span> <span class="dt">\</span></span>
<span id="cb2681-3"><a href="chap-linux-command-bash.html#cb2681-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--enable-BLAS-shlib</span> <span class="at">--enable-memory-profiling</span> <span class="at">--with-blas</span><span class="op">=</span><span class="st">&quot;-lopenblas&quot;</span></span></code></pre></div>
<pre><code>R is now configured for x86_64-pc-linux-gnu

  Source directory:            .
  Installation directory:      /opt/R/R-devel

  C compiler:                  gcc  -g -O2
  Fortran fixed-form compiler: gfortran -fno-optimize-sibling-calls -g -O2

  Default C++ compiler:        g++ -std=gnu++11  -g -O2
  C++14 compiler:              g++ -std=gnu++14  -g -O2
  C++17 compiler:              g++ -std=gnu++17  -g -O2
  C++20 compiler:              g++ -std=gnu++2a  -g -O2
  Fortran free-form compiler:  gfortran -fno-optimize-sibling-calls -g -O2
  Obj-C compiler:               

  Interfaces supported:        X11, tcltk
  External libraries:          pcre2, readline, BLAS(OpenBLAS), curl
  Additional capabilities:     PNG, JPEG, TIFF, NLS, cairo, ICU
  Options enabled:             shared R library, shared BLAS, R profiling, memory profiling

  Capabilities skipped:        
  Options not enabled:         

  Recommended packages:        yes</code></pre>
<p>配置好了以后，可以编译安装了</p>
<div class="sourceCode" id="cb2683"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2683-1"><a href="chap-linux-command-bash.html#cb2683-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> make install</span></code></pre></div>
<p><a href="https://github.com/Enchufa2/r-flexiblas">flexiblas</a> 支持多种 BLAS 库自由切换</p>
</div>
<div id="install-softwares" class="section level2" number="37.13">
<h2><span class="header-section-number">A.13</span> 安装软件</h2>
<p>本书在后续章节中陆续用到新的 R 包，其安装过程不会在正文中呈现，下面以在 CentOS 8 上安装 <strong>sf</strong> 包为例介绍。首先需要安装一些系统依赖，具体安装哪些依赖参见 <strong>sf</strong> 包开发站点 <a href="https://github.com/r-spatial/sf" class="uri">https://github.com/r-spatial/sf</a>。</p>
<div class="sourceCode" id="cb2684"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2684-1"><a href="chap-linux-command-bash.html#cb2684-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf config-manager <span class="at">--set-disabled</span> PowerTools <span class="co"># openblas-devel</span></span>
<span id="cb2684-2"><a href="chap-linux-command-bash.html#cb2684-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> sqlite-devel gdal-devel <span class="dt">\</span></span>
<span id="cb2684-3"><a href="chap-linux-command-bash.html#cb2684-3" aria-hidden="true" tabindex="-1"></a>  proj-devel geos-devel udunits2-devel</span></code></pre></div>
<p>然后，在 R 命令行窗口中，执行安装命令：</p>
<div class="sourceCode" id="cb2685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2685-1"><a href="chap-linux-command-bash.html#cb2685-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;sf&#39;</span>)</span></code></pre></div>
<p>至此，安装完成。如遇本地未安装的新 R 包，可从其官方文档中找寻安装方式。如果你完全不知道自己应该安装哪些，考虑把下面的依赖都安装上</p>
<div class="sourceCode" id="cb2686"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2686-1"><a href="chap-linux-command-bash.html#cb2686-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb2686-2"><a href="chap-linux-command-bash.html#cb2686-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># magick</span></span>
<span id="cb2686-3"><a href="chap-linux-command-bash.html#cb2686-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">ImageMagick-c++-devel</span> <span class="dt">\ </span></span>
<span id="cb2686-4"><a href="chap-linux-command-bash.html#cb2686-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pdftools</span></span>
<span id="cb2686-5"><a href="chap-linux-command-bash.html#cb2686-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">poppler-cpp-devel</span> <span class="dt">\ </span></span>
<span id="cb2686-6"><a href="chap-linux-command-bash.html#cb2686-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gifski</span></span>
<span id="cb2686-7"><a href="chap-linux-command-bash.html#cb2686-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">cargo</span> </span></code></pre></div>
<p>软件包管理器架构图，各个命令分别担负什么样的功能，每个命令学习的一般路径是什么，而不是详细介绍每个命令、每个参数的使用，只需给出一个命令的完整使用即可，其余给出一个查询命令帮助手册</p>
<div class="sourceCode" id="cb2687"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2687-1"><a href="chap-linux-command-bash.html#cb2687-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> copr</span>
<span id="cb2687-2"><a href="chap-linux-command-bash.html#cb2687-2" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> config-manager</span></code></pre></div>
</div>
<div id="sec-install-r-pkgs" class="section level2" number="37.14">
<h2><span class="header-section-number">A.14</span> 安装 R 包</h2>
<p>Iñaki Ucar 开发的 <a href="https://github.com/Enchufa2/cran2copr">cran2copr</a> 项目实现在 Fedora 上安装预编译好的二进制 R 包，项目目的类似 Debian 平台上的 <a href="https://github.com/r-builder/cran2deb">cran2deb</a></p>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/r-lib/devtools">devtools</a> 是开发 R 包的常用工具，同时具有很重的依赖，请看</p>
<div class="sourceCode" id="cb2688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2688-1"><a href="chap-linux-command-bash.html#cb2688-1" aria-hidden="true" tabindex="-1"></a>tools<span class="sc">::</span><span class="fu">package_dependencies</span>(<span class="st">&#39;devtools&#39;</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## $devtools
##  [1] &quot;usethis&quot;     &quot;callr&quot;       &quot;cli&quot;         &quot;desc&quot;        &quot;ellipsis&quot;   
##  [6] &quot;fs&quot;          &quot;httr&quot;        &quot;lifecycle&quot;   &quot;memoise&quot;     &quot;pkgbuild&quot;   
## [11] &quot;pkgload&quot;     &quot;rcmdcheck&quot;   &quot;remotes&quot;     &quot;rlang&quot;       &quot;roxygen2&quot;   
## [16] &quot;rstudioapi&quot;  &quot;rversions&quot;   &quot;sessioninfo&quot; &quot;stats&quot;       &quot;testthat&quot;   
## [21] &quot;tools&quot;       &quot;utils&quot;       &quot;withr&quot;       &quot;processx&quot;    &quot;R6&quot;         
## [26] &quot;glue&quot;        &quot;rprojroot&quot;   &quot;methods&quot;     &quot;curl&quot;        &quot;jsonlite&quot;   
## [31] &quot;mime&quot;        &quot;openssl&quot;     &quot;cachem&quot;      &quot;crayon&quot;      &quot;prettyunits&quot;
## [36] &quot;digest&quot;      &quot;xopen&quot;       &quot;brew&quot;        &quot;commonmark&quot;  &quot;knitr&quot;      
## [41] &quot;purrr&quot;       &quot;stringi&quot;     &quot;stringr&quot;     &quot;xml2&quot;        &quot;cpp11&quot;      
## [46] &quot;brio&quot;        &quot;evaluate&quot;    &quot;magrittr&quot;    &quot;praise&quot;      &quot;ps&quot;         
## [51] &quot;waldo&quot;       &quot;clipr&quot;       &quot;gert&quot;        &quot;gh&quot;          &quot;rappdirs&quot;   
## [56] &quot;whisker&quot;     &quot;yaml&quot;        &quot;graphics&quot;    &quot;grDevices&quot;   &quot;fastmap&quot;    
## [61] &quot;askpass&quot;     &quot;credentials&quot; &quot;sys&quot;         &quot;zip&quot;         &quot;gitcreds&quot;   
## [66] &quot;ini&quot;         &quot;highr&quot;       &quot;xfun&quot;        &quot;diffobj&quot;     &quot;fansi&quot;      
## [71] &quot;rematch2&quot;    &quot;tibble&quot;      &quot;pillar&quot;      &quot;pkgconfig&quot;   &quot;vctrs&quot;      
## [76] &quot;utf8&quot;</code></pre>
<p>其中，依赖关系见表 <a href="chap-linux-command-bash.html#tab:devtools-sys-dep">A.2</a></p>
<table>
<caption><span id="tab:devtools-sys-dep">表 A.2: </span> devtools 的系统依赖</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">curl</th>
<th align="left">git2r</th>
<th align="left">openssl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Ubuntu</td>
<td align="left">libcurl-dev<a href="#fn84" class="footnote-ref" id="fnref84"><sup>84</sup></a></td>
<td align="left">libgit2-dev</td>
<td align="left">libssl-dev</td>
</tr>
<tr class="even">
<td align="left">CentOS</td>
<td align="left">libcurl-devel</td>
<td align="left">libgit2-devel</td>
<td align="left">openssl-devel</td>
</tr>
</tbody>
</table></li>
</ol>
<ol style="list-style-type: decimal">
<li><p><a href="https://github.com/r-spatial/sf">sf</a> 是处理空间数据的常用工具</p>
<div class="sourceCode" id="cb2690"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2690-1"><a href="chap-linux-command-bash.html#cb2690-1" aria-hidden="true" tabindex="-1"></a>tools<span class="sc">::</span><span class="fu">package_dependencies</span>(<span class="st">&#39;sf&#39;</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## $sf
##  [1] &quot;methods&quot;    &quot;classInt&quot;   &quot;DBI&quot;        &quot;graphics&quot;   &quot;grDevices&quot; 
##  [6] &quot;grid&quot;       &quot;magrittr&quot;   &quot;Rcpp&quot;       &quot;s2&quot;         &quot;stats&quot;     
## [11] &quot;tools&quot;      &quot;units&quot;      &quot;utils&quot;      &quot;e1071&quot;      &quot;class&quot;     
## [16] &quot;KernSmooth&quot; &quot;wk&quot;         &quot;MASS&quot;       &quot;proxy&quot;</code></pre>
<p>其主要的系统依赖分别是 GEOS 3.5.1, GDAL 2.2.2, PROJ 4.9.2</p>
<div class="sourceCode" id="cb2692"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2692-1"><a href="chap-linux-command-bash.html#cb2692-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:ubuntugis/ubuntugis-unstable</span>
<span id="cb2692-2"><a href="chap-linux-command-bash.html#cb2692-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb2692-3"><a href="chap-linux-command-bash.html#cb2692-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libudunits2-dev libgdal-dev libgeos-dev libproj-dev </span></code></pre></div>
<p>这样也同时解决了 <a href="https://github.com/pacificclimate/Rudunits2">udunits2</a>、 <a href="https://r-forge.r-project.org/projects/rgdal/">rgdal</a> 和 <a href="https://r-forge.r-project.org/projects/rgeos/">rgeos</a> 等 3个 R 包的系统依赖，其中 udunits2 使用如下命令安装</p>
<div class="sourceCode" id="cb2693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2693-1"><a href="chap-linux-command-bash.html#cb2693-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(’udunits2’, <span class="at">configure.args =</span> <span class="st">&#39;--with-udunits2-include=/usr/include/udunits2&#39;</span>)</span></code></pre></div></li>
<li><p>图形设备支持 cairo png jpeg tiff</p>
<div class="sourceCode" id="cb2694"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2694-1"><a href="chap-linux-command-bash.html#cb2694-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libcairo2-dev libjpeg-dev libpng-dev libtiff-dev </span></code></pre></div></li>
<li><p>图像处理 <a href="https://github.com/dahtah/imager">imager</a> 和 <a href="https://github.com/ropensci/magick">magick</a></p>
<div class="sourceCode" id="cb2695"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2695-1"><a href="chap-linux-command-bash.html#cb2695-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install fftw-devel <span class="co"># CentOS</span></span>
<span id="cb2695-2"><a href="chap-linux-command-bash.html#cb2695-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libfftw3-dev <span class="co"># Ubuntu</span></span></code></pre></div>
<p>在 Ubuntu 系统上安装最新的 libmagick++-dev 库</p>
<div class="sourceCode" id="cb2696"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2696-1"><a href="chap-linux-command-bash.html#cb2696-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:opencpu/imagemagick</span>
<span id="cb2696-2"><a href="chap-linux-command-bash.html#cb2696-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb2696-3"><a href="chap-linux-command-bash.html#cb2696-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libmagick++-dev </span></code></pre></div>
<p>在 CentOS 系统上</p>
<div class="sourceCode" id="cb2697"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2697-1"><a href="chap-linux-command-bash.html#cb2697-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install <span class="at">-y</span> ImageMagick-c++-devel</span></code></pre></div>
<p>然后安装 R 包 <code>install.packages(c('imager', 'magick'))</code></p></li>
<li><p><a href="https://r-forge.r-project.org/projects/rgl/">rgl</a> 是绘制真三维图形的重量级 R 包</p>
<div class="sourceCode" id="cb2698"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2698-1"><a href="chap-linux-command-bash.html#cb2698-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libcgal-dev libglu1-mesa-dev libx11-dev <span class="co"># Ubuntu</span></span>
<span id="cb2698-2"><a href="chap-linux-command-bash.html#cb2698-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install mesa-libGLU mesa-libGLU-devel <span class="co"># CentOS</span></span></code></pre></div>
<p>然后安装 R 包</p>
<div class="sourceCode" id="cb2699"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2699-1"><a href="chap-linux-command-bash.html#cb2699-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;rgl&#39;</span>)</span></code></pre></div>
<p>在 Ubuntu 系统上还可以这样安装</p>
<div class="sourceCode" id="cb2700"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2700-1"><a href="chap-linux-command-bash.html#cb2700-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:marutter/rrutter3.5</span>
<span id="cb2700-2"><a href="chap-linux-command-bash.html#cb2700-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb2700-3"><a href="chap-linux-command-bash.html#cb2700-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-cran-rgl</span></code></pre></div></li>
<li><p><a href="https://github.com/s-u/rJava">rJava</a> 是 Java 语言和 R 语言之间实现通信交流的桥梁</p>
<div class="sourceCode" id="cb2701"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2701-1"><a href="chap-linux-command-bash.html#cb2701-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> default-jdk</span>
<span id="cb2701-2"><a href="chap-linux-command-bash.html#cb2701-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> R CMD javareconf</span></code></pre></div>
<p>然后安装 rJava 包 <code>install.packages(’rJava’)</code></p></li>
<li><p><a href="https://igraph.org/">igraph</a> 是网络数据分析的必备 R 包，为了发挥其最大性能，需要安装三个系统依赖</p>
<div class="sourceCode" id="cb2702"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2702-1"><a href="chap-linux-command-bash.html#cb2702-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libgmp-dev libxml2-dev libglpk-dev</span></code></pre></div>
<p>然后安装 R 包</p>
<div class="sourceCode" id="cb2703"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2703-1"><a href="chap-linux-command-bash.html#cb2703-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;igraph&#39;</span>)</span></code></pre></div></li>
<li><p><a href="https://github.com/cdeterman/gpuR">gpuR</a> 是基于 GPU 进行矩阵计算的扩展包，依赖 RcppEigen 确保安装 OpenCL 和 RViennaCL 或者 安装 Nvidia 驱动和 CUDA，使用 <a href="https://github.com/gpuRcore/gpuRcuda">gpuRcuda</a> 和 <a href="https://github.com/nullsatz/gputools">gputools</a> 扩展包，下面安装指导来自其 Wiki</p>
<div class="sourceCode" id="cb2704"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2704-1"><a href="chap-linux-command-bash.html#cb2704-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install OpenCL headers</span></span>
<span id="cb2704-2"><a href="chap-linux-command-bash.html#cb2704-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install opencl-headers opencv-dev</span>
<span id="cb2704-3"><a href="chap-linux-command-bash.html#cb2704-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2704-4"><a href="chap-linux-command-bash.html#cb2704-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install NVIDIA Drivers and CUDA</span></span>
<span id="cb2704-5"><a href="chap-linux-command-bash.html#cb2704-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">-y</span> ppa:xorg-edgers/ppa</span>
<span id="cb2704-6"><a href="chap-linux-command-bash.html#cb2704-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb2704-7"><a href="chap-linux-command-bash.html#cb2704-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install nvidia-346 nvidia-settings</span></code></pre></div></li>
<li><p><a href="https://github.com/jyypma/nloptr">nloptr</a> 是 <a href="https://github.com/stevengj/NLopt/">NLopt</a> 的 R 语言接口，首先安装 NLopt 程序库 <code>sudo apt-get install libnlopt-dev</code> 然后安装 R 包<code>install.packages('nloptr')</code>，nloptr 被 700+ R 包依赖，如 <strong>lme4</strong>， <strong>spaMM</strong>， <strong>glmmTMB</strong>， <strong>rstanarm</strong> 等。</p></li>
<li><p>Rmpfr</p>
<div class="sourceCode" id="cb2705"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2705-1"><a href="chap-linux-command-bash.html#cb2705-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libmpfr-dev</span></code></pre></div>
<div class="sourceCode" id="cb2706"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2706-1"><a href="chap-linux-command-bash.html#cb2706-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(’Rmpfr’)</span></code></pre></div></li>
<li><p>geojson</p>
<div class="sourceCode" id="cb2707"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2707-1"><a href="chap-linux-command-bash.html#cb2707-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install jq-devel protobuf-devel</span></code></pre></div>
<div class="sourceCode" id="cb2708"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2708-1"><a href="chap-linux-command-bash.html#cb2708-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&#39;geojson&#39;</span>,<span class="st">&#39;geojsonio&#39;</span>,<span class="st">&#39;jqr&#39;</span>,<span class="st">&#39;protolite&#39;</span>))</span></code></pre></div></li>
<li><p>lgcp</p>
<div class="sourceCode" id="cb2709"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2709-1"><a href="chap-linux-command-bash.html#cb2709-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install bwidget</span></code></pre></div>
<div class="sourceCode" id="cb2710"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2710-1"><a href="chap-linux-command-bash.html#cb2710-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&#39;rpanel&#39;</span>,<span class="st">&#39;lgcp&#39;</span>))</span></code></pre></div></li>
<li><p>ijtiff</p>
<div class="sourceCode" id="cb2711"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2711-1"><a href="chap-linux-command-bash.html#cb2711-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install jbigkit-devel</span></code></pre></div>
<div class="sourceCode" id="cb2712"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2712-1"><a href="chap-linux-command-bash.html#cb2712-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;ijtiff&#39;</span>)</span></code></pre></div></li>
<li><p>webshot 包用于截图</p>
<div class="sourceCode" id="cb2713"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2713-1"><a href="chap-linux-command-bash.html#cb2713-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install phantomjs</span></code></pre></div>
<div class="sourceCode" id="cb2714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2714-1"><a href="chap-linux-command-bash.html#cb2714-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(’webshot’)</span></code></pre></div></li>
<li><p>gifski 包合成 GIF 动图</p>
<div class="sourceCode" id="cb2715"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2715-1"><a href="chap-linux-command-bash.html#cb2715-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install cargo</span></code></pre></div>
<div class="sourceCode" id="cb2716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2716-1"><a href="chap-linux-command-bash.html#cb2716-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;gifski&#39;</span>)</span></code></pre></div></li>
</ol>
</div>
<div id="sec-software-manager" class="section level2" number="37.15">
<h2><span class="header-section-number">A.15</span> 软件包管理器</h2>
<div id="subsec-dnf-yum" class="section level3" number="37.15.1">
<h3><span class="header-section-number">A.15.1</span> dnf</h3>
<ol style="list-style-type: decimal">
<li>清理升级后的 CentOS 8 系统内核</li>
</ol>
<p>查找系统安装的内核</p>
<div class="sourceCode" id="cb2717"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2717-1"><a href="chap-linux-command-bash.html#cb2717-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rpm</span> <span class="at">-qa</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">grep</span> kernel</span></code></pre></div>
<pre><code>kernel-4.18.0-147.8.1.el8_1.x86_64
kernel-4.18.0-193.6.3.el8_2.x86_64
kernel-core-4.18.0-147.8.1.el8_1.x86_64
kernel-core-4.18.0-193.6.3.el8_2.x86_64
kernel-headers-4.18.0-193.6.3.el8_2.x86_64
kernel-modules-4.18.0-147.8.1.el8_1.x86_64
kernel-modules-4.18.0-193.6.3.el8_2.x86_64
kernel-tools-4.18.0-193.6.3.el8_2.x86_64
kernel-tools-libs-4.18.0-193.6.3.el8_2.x86_64</code></pre>
<p>仅保留一个版本的内核，其它旧的内核都删除掉</p>
<div class="sourceCode" id="cb2719"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2719-1"><a href="chap-linux-command-bash.html#cb2719-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf remove <span class="va">$(</span><span class="ex">dnf</span> repoquery <span class="at">--installonly</span> <span class="at">--latest-limit</span><span class="op">=</span>-1 <span class="at">-q</span><span class="va">)</span></span></code></pre></div>
<pre><code>模块依赖问题

 问题 1: conflicting requests
  - nothing provides module(perl:5.26) needed by module perl-DBD-MySQL:4.046:8010020191114030811:073fa5fe-0.x86_64
 问题 2: conflicting requests
  - nothing provides module(perl:5.26) needed by module perl-DBI:1.641:8010020191113222731:16b3ab4d-0.x86_64
 问题 3: conflicting requests
  - nothing provides module(perl:5.26) needed by module perl-YAML:1.24:8010020191114031501:a5949e2e-0.x86_64
依赖关系解决。
=======================================================================================================================
 软件包                        架构                  版本                                 仓库                    大小
=======================================================================================================================
移除:
 kernel                        x86_64                4.18.0-147.8.1.el8_1                 @BaseOS                  0  
 kernel-core                   x86_64                4.18.0-147.8.1.el8_1                 @BaseOS                 58 M
 kernel-modules                x86_64                4.18.0-147.8.1.el8_1                 @BaseOS                 20 M

事务概要
=======================================================================================================================
移除  3 软件包

将会释放空间：78 M
确定吗？[y/N]： y
运行事务检查
事务检查成功。
运行事务测试
事务测试成功。
运行事务
  准备中  :                                                                                                        1/1 
  删除    : kernel-4.18.0-147.8.1.el8_1.x86_64                                                                     1/3 
  运行脚本: kernel-4.18.0-147.8.1.el8_1.x86_64                                                                     1/3 
  删除    : kernel-modules-4.18.0-147.8.1.el8_1.x86_64                                                             2/3 
  运行脚本: kernel-modules-4.18.0-147.8.1.el8_1.x86_64                                                             2/3 
  运行脚本: kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                3/3 
  删除    : kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                3/3 
  运行脚本: kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                3/3 
  验证    : kernel-4.18.0-147.8.1.el8_1.x86_64                                                                     1/3 
  验证    : kernel-core-4.18.0-147.8.1.el8_1.x86_64                                                                2/3 
  验证    : kernel-modules-4.18.0-147.8.1.el8_1.x86_64                                                             3/3 

已移除:
  kernel-4.18.0-147.8.1.el8_1.x86_64                          kernel-core-4.18.0-147.8.1.el8_1.x86_64                 
  kernel-modules-4.18.0-147.8.1.el8_1.x86_64                 

完毕！</code></pre>
<p><a href="https://unix.stackexchange.com/questions/587853/centos-8-modular-dependency-problems">解决上述模块依赖问题的办法</a> 是重置三个 Perl 模块</p>
<div class="sourceCode" id="cb2721"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2721-1"><a href="chap-linux-command-bash.html#cb2721-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf module reset perl-DBD-MySQL perl-YAML perl-DBI</span></code></pre></div>
<pre><code>依赖关系解决。
=======================================================================================================================
 软件包                      架构                       版本                         仓库                         大小
=======================================================================================================================
重置模块:
 perl-DBD-MySQL                                                                                                       
 perl-DBI                                                                                                             
 perl-YAML                                                                                                            

事务概要
=======================================================================================================================

确定吗？[y/N]： y
完毕！</code></pre>
</div>
<div id="subsec-apt-get" class="section level3" number="37.15.2">
<h3><span class="header-section-number">A.15.2</span> apt</h3>
<p>添加或删除 PPA (Personal Package Archive)，比如在 Ubuntu 20.04 及之前的版本上安装<a href="https://inkscape.org/release/inkscape-1.0/gnulinux/ubuntu/ppa/dl/">新版 Inkscape</a></p>
<div class="sourceCode" id="cb2723"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2723-1"><a href="chap-linux-command-bash.html#cb2723-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository ppa:inkscape.dev/stable</span>
<span id="cb2723-2"><a href="chap-linux-command-bash.html#cb2723-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="at">--remove</span> ppa:inkscape.dev/stable</span></code></pre></div>
<div class="sourceCode" id="cb2724"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2724-1"><a href="chap-linux-command-bash.html#cb2724-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install build-essential <span class="co"># 修复依赖问题</span></span>
<span id="cb2724-2"><a href="chap-linux-command-bash.html#cb2724-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="co"># 更新资源列表</span></span>
<span id="cb2724-3"><a href="chap-linux-command-bash.html#cb2724-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get upgrade <span class="co"># 更新软件包</span></span>
<span id="cb2724-4"><a href="chap-linux-command-bash.html#cb2724-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get autoclean <span class="co"># 删除已卸的软件的备份</span></span>
<span id="cb2724-5"><a href="chap-linux-command-bash.html#cb2724-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get clean <span class="co"># 删除已装或已卸的软件的备份</span></span>
<span id="cb2724-6"><a href="chap-linux-command-bash.html#cb2724-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get autoremove <span class="at">--purge</span> <span class="pp">*</span> <span class="co"># 推荐卸载软件的方式</span></span>
<span id="cb2724-7"><a href="chap-linux-command-bash.html#cb2724-7" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-get</span> list <span class="at">--upgradable</span> <span class="co"># 列出可升级的包</span></span></code></pre></div>
<p>找到并删除旧的内核</p>
<div class="sourceCode" id="cb2725"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2725-1"><a href="chap-linux-command-bash.html#cb2725-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dpkg</span> <span class="at">--list</span> <span class="kw">|</span> <span class="fu">grep</span> linux-image</span>
<span id="cb2725-2"><a href="chap-linux-command-bash.html#cb2725-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get purge linux-image-3.19.0-<span class="dt">{18</span><span class="op">,</span><span class="dt">20</span><span class="op">,</span><span class="dt">21</span><span class="op">,</span><span class="dt">25}</span></span>
<span id="cb2725-3"><a href="chap-linux-command-bash.html#cb2725-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-grub2</span></code></pre></div>
<div class="sourceCode" id="cb2726"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2726-1"><a href="chap-linux-command-bash.html#cb2726-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 搜索</span></span>
<span id="cb2726-2"><a href="chap-linux-command-bash.html#cb2726-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-cache</span> search octave <span class="kw">|</span> <span class="fu">grep</span> octave</span>
<span id="cb2726-3"><a href="chap-linux-command-bash.html#cb2726-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 查询</span></span>
<span id="cb2726-4"><a href="chap-linux-command-bash.html#cb2726-4" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> show octave</span>
<span id="cb2726-5"><a href="chap-linux-command-bash.html#cb2726-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 安装</span></span>
<span id="cb2726-6"><a href="chap-linux-command-bash.html#cb2726-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install octave</span></code></pre></div>
<div class="sourceCode" id="cb2727"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2727-1"><a href="chap-linux-command-bash.html#cb2727-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install lsb-core</span>
<span id="cb2727-2"><a href="chap-linux-command-bash.html#cb2727-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lsb_release</span> <span class="at">-a</span></span></code></pre></div>
<div class="sourceCode" id="cb2728"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2728-1"><a href="chap-linux-command-bash.html#cb2728-1" aria-hidden="true" tabindex="-1"></a><span class="ex">adduser</span> cloud2016 <span class="co"># 添加用户</span></span>
<span id="cb2728-2"><a href="chap-linux-command-bash.html#cb2728-2" aria-hidden="true" tabindex="-1"></a><span class="fu">passwd</span> cloud2016  <span class="co"># 用户密码设为 cloud</span></span>
<span id="cb2728-3"><a href="chap-linux-command-bash.html#cb2728-3" aria-hidden="true" tabindex="-1"></a><span class="fu">whereis</span> sudoers   <span class="co"># 查找文件位置</span></span>
<span id="cb2728-4"><a href="chap-linux-command-bash.html#cb2728-4" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-v</span> u+w /etc/sudoers <span class="co"># 给文件 sudoers 添加写权限</span></span>
<span id="cb2728-5"><a href="chap-linux-command-bash.html#cb2728-5" aria-hidden="true" tabindex="-1"></a><span class="ex">vim</span> /etc/sudoers <span class="co"># 添加 cloud2016 管理员权限</span></span>
<span id="cb2728-6"><a href="chap-linux-command-bash.html#cb2728-6" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-v</span> u-w /etc/sudoers <span class="co"># 收回权限</span></span></code></pre></div>
<p>安装确认 openssh-server 服务</p>
<div class="sourceCode" id="cb2729"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2729-1"><a href="chap-linux-command-bash.html#cb2729-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install openssh-server</span>
<span id="cb2729-2"><a href="chap-linux-command-bash.html#cb2729-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /etc/init.d/ssh start</span>
<span id="cb2729-3"><a href="chap-linux-command-bash.html#cb2729-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-aux</span> <span class="kw">|</span> <span class="fu">grep</span> ssh</span></code></pre></div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="81">
<li id="fn81"><p>CentOS 系统默认没有安装 tree 软件，需要先安装才能使用此命令 <code>sudo dnf install -y tree</code><a href="chap-linux-command-bash.html#fnref81" class="footnote-back">↩︎</a></p></li>
<li id="fn82"><p>zip 格式的文件需要额外安装 zip 和 unzip 两款软件实现压缩和解压缩。<a href="chap-linux-command-bash.html#fnref82" class="footnote-back">↩︎</a></p></li>
<li id="fn83"><p>在 CentOS 7 上打造 R 语言编程环境<a href="chap-linux-command-bash.html#fnref83" class="footnote-back">↩︎</a></p></li>
<li id="fn84"><p>libcurl-dev 是一个虚包 virtual package，由 libcurl4-openssl-dev 或 libcurl4-nss-dev 或 libcurl4-gnutls-dev 实际提供，选择其中一个安装即可。<a href="chap-linux-command-bash.html#fnref84" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>现代应用统计与 R 语言</strong>: Modern Applied Statistics with R" was written by 黄湘云. It was last built on 2022-04-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
