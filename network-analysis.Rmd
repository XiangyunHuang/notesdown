# 网络分析 {#chap-network-analysis}

```{r}
library(igraph)
```

Eric Kolaczyk 和 Gábor Csárdi 给《Statistical Analysis of Network Data with R》网络数据的统计分析的第二版开发了 [sand](https://github.com/kolaczyk/sand) 包，提供了配套的代码和数据。Gábor Csárdi 开发了 [igraph](https://github.com/igraph/igraph) 的 R 接口 [rigraph](https://github.com/igraph/rigraph)。

- [tidygraph](https://github.com/thomasp85/tidygraph) 
- [ggraph](https://github.com/thomasp85/ggraph)
- [DiagrammeR](https://github.com/rich-iannone/DiagrammeR)
- [statnet](https://github.com/statnet)

柯尼斯堡七桥问题：在所有桥都只走一遍的情况下，如何才能把这个地方所有的桥都走遍？[^seven-bridges]欧拉将每一座桥抽象为一条线，桥所连接地区抽象为点。此处，用[tikz-network](https://ctan.org/pkg/tikz-network) 绘制网络图，如图\@ref(fig:seven-bridges)所示，$1,2,\cdots,7$ 分别表示七座桥，$A,B,C,D$ 分别表示四块区域。

[^seven-bridges]: <https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg>

```{r seven-bridges, engine="tikz", fig.cap="柯尼斯堡七桥问题", cache=TRUE, engine.opts=list(extra.preamble=c("\\usepackage[default]{sourcesanspro}", "\\usepackage{tikz-network}"))}
\begin{tikzpicture}
\Vertex[IdAsLabel, x=5, color=gray, size=1, fontsize=\large]{A}
\Vertex[IdAsLabel, x=10, color=gray, size=1, fontsize=\large]{B}
\Vertex[IdAsLabel, x=15, color=gray, size=1, fontsize=\large]{C}
\Vertex[IdAsLabel, x=10, y=6, color=gray, size=1, fontsize=\large]{D}

\Edge[label=2, bend=45, fontscale=2](A)(B)
\Edge[label=6, bend=30, fontscale=2](A)(D)
\Edge[label=3, bend=45, fontscale=2](B)(A)
\Edge[label=5, bend=45, fontscale=2](B)(C)
\Edge[label=4, bend=45, fontscale=2](C)(B)
\Edge[label=7, bend=30, fontscale=2](D)(C)
\Edge[label=1, fontscale=2](D)(B)
\end{tikzpicture}
```

