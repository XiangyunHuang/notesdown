<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>第 11 章 交互表格 | 现代应用统计与 R 语言</title>
<meta name="author" content="黄湘云">
<meta name="description" content="Greg Lin 开发的 reactable 包覆盖测试达到惊人的 99%，它基于 JavaScript 库 react-table， 是 react 框架的衍生品，Nick Raienko 整理了一份超棒的 react 模块合集 也许机智如你，可以引入更多优秀的 react 模块到 R 语言社区。reactablefmtr 提供一些函数简化 reactable 定制表格的复杂性...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="第 11 章 交互表格 | 现代应用统计与 R 语言">
<meta property="og:type" content="book">
<meta property="og:description" content="Greg Lin 开发的 reactable 包覆盖测试达到惊人的 99%，它基于 JavaScript 库 react-table， 是 react 框架的衍生品，Nick Raienko 整理了一份超棒的 react 模块合集 也许机智如你，可以引入更多优秀的 react 模块到 R 语言社区。reactablefmtr 提供一些函数简化 reactable 定制表格的复杂性...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第 11 章 交互表格 | 现代应用统计与 R 语言">
<meta name="twitter:description" content="Greg Lin 开发的 reactable 包覆盖测试达到惊人的 99%，它基于 JavaScript 库 react-table， 是 react 框架的衍生品，Nick Raienko 整理了一份超棒的 react 模块合集 也许机智如你，可以引入更多优秀的 react 模块到 R 语言社区。reactablefmtr 提供一些函数简化 reactable 定制表格的复杂性...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs/header-attrs.js"></script><script src="libs/jquery/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap/bootstrap.bundle.min.js"></script><script src="libs/bs3compat/tabs.js"></script><script src="libs/bs3compat/bs3compat.js"></script><link href="libs/bs4_book/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book/bs4_book.js"></script><script src="libs/htmlwidgets/htmlwidgets.js"></script><script src="libs/plotly-binding/plotly.js"></script><script src="libs/typedarray/typedarray.min.js"></script><link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main/plotly-latest.min.js"></script><script src="libs/proj4js/proj4.js"></script><link href="libs/highcharts/css/motion.css" rel="stylesheet">
<script src="libs/highcharts/highcharts.js"></script><script src="libs/highcharts/highcharts-3d.js"></script><script src="libs/highcharts/highcharts-more.js"></script><script src="libs/highcharts/modules/stock.js"></script><script src="libs/highcharts/modules/map.js"></script><script src="libs/highcharts/modules/annotations.js"></script><script src="libs/highcharts/modules/data.js"></script><script src="libs/highcharts/modules/drilldown.js"></script><script src="libs/highcharts/modules/item-series.js"></script><script src="libs/highcharts/modules/offline-exporting.js"></script><script src="libs/highcharts/modules/overlapping-datalabels.js"></script><script src="libs/highcharts/modules/exporting.js"></script><script src="libs/highcharts/modules/export-data.js"></script><script src="libs/highcharts/modules/funnel.js"></script><script src="libs/highcharts/modules/heatmap.js"></script><script src="libs/highcharts/modules/treemap.js"></script><script src="libs/highcharts/modules/sankey.js"></script><script src="libs/highcharts/modules/dependency-wheel.js"></script><script src="libs/highcharts/modules/organization.js"></script><script src="libs/highcharts/modules/solid-gauge.js"></script><script src="libs/highcharts/modules/streamgraph.js"></script><script src="libs/highcharts/modules/sunburst.js"></script><script src="libs/highcharts/modules/vector.js"></script><script src="libs/highcharts/modules/wordcloud.js"></script><script src="libs/highcharts/modules/xrange.js"></script><script src="libs/highcharts/modules/tilemap.js"></script><script src="libs/highcharts/modules/venn.js"></script><script src="libs/highcharts/modules/gantt.js"></script><script src="libs/highcharts/modules/timeline.js"></script><script src="libs/highcharts/modules/parallel-coordinates.js"></script><script src="libs/highcharts/modules/bullet.js"></script><script src="libs/highcharts/modules/coloraxis.js"></script><script src="libs/highcharts/modules/dumbbell.js"></script><script src="libs/highcharts/modules/lollipop.js"></script><script src="libs/highcharts/modules/series-label.js"></script><script src="libs/highcharts/plugins/motion.js"></script><script src="libs/highcharts/custom/reset.js"></script><script src="libs/highcharts/modules/boost.js"></script><script src="libs/highchart-binding/highchart.js"></script><script src="libs/es6shim/es6shim.js"></script><script src="libs/es7shim/es7shim.js"></script><script src="libs/graphre/graphre.js"></script><script src="libs/nomnoml/nomnoml.js"></script><script src="libs/nomnoml-binding/nomnoml.js"></script><script src="libs/plotly-locale-zh-CN/zh-cn.js"></script><script src="libs/mathjax/cdn.js"></script><link href="libs/dygraphs/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs/dygraph-combined.js"></script><script src="libs/dygraphs/shapes.js"></script><script src="libs/moment/moment.js"></script><script src="libs/moment-timezone/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding/dygraphs.js"></script><script src="libs/Dygraph.Plugins.Unzoom/unzoom.js"></script><script src="libs/echarts4r/echarts-en.min.js"></script><script src="libs/echarts4r/ecStat.min.js"></script><script src="libs/echarts4r/dataTool.min.js"></script><script src="libs/echarts4r-binding/echarts4r.js"></script><script src="libs/echarts-world/world.js"></script><script src="libs/d3/d3.min.js"></script><script src="libs/forceNetwork-binding/forceNetwork.js"></script><link href="libs/vis/vis.css" rel="stylesheet">
<script src="libs/vis/vis.min.js"></script><script src="libs/visNetwork-binding/visNetwork.js"></script><script src="libs/FileSaver/FileSaver.min.js"></script><script src="libs/Blob/Blob.js"></script><script src="libs/canvas-toBlob/canvas-toBlob.js"></script><script src="libs/html2canvas/html2canvas.js"></script><script src="libs/jspdf/jspdf.debug.js"></script><link href="libs/jquery-sparkline/jquery.sparkline.css" rel="stylesheet">
<script src="libs/jquery-sparkline/jquery.sparkline.js"></script><script src="libs/sparkline-binding/sparkline.js"></script><script src="libs/r2d3-render/r2d3-render.js"></script><script src="libs/webcomponents/webcomponents.js"></script><script src="libs/r2d3-binding/r2d3.js"></script><script src="libs/d3v6/d3.min.js"></script><link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding/datatables.js"></script><link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script><script src="libs/jszip/jszip.min.js"></script><script src="libs/pdfmake/pdfmake.js"></script><script src="libs/pdfmake/vfs_fonts.js"></script><link href="libs/dt-ext-buttons/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-buttons/js/dataTables.buttons.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.flash.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.html5.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.colVis.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.print.min.js"></script><link href="libs/dt-ext-rowgroup/css/rowGroup.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-rowgroup/js/dataTables.rowGroup.min.js"></script><script src="libs/kePrint/kePrint.js"></script><link href="libs/lightable/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-54GQKWF7VP"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-54GQKWF7VP');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">现代应用统计与 R 语言</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">欢迎</a></li>
<li><a class="" href="chap-preface.html"><span class="header-section-number">1</span> 前言</a></li>
<li><a class="" href="chap-notations.html"><span class="header-section-number">2</span> 符号说明</a></li>
<li><a class="" href="chap-file-operations.html"><span class="header-section-number">3</span> 文件操作</a></li>
<li><a class="" href="chap-data-structure.html"><span class="header-section-number">4</span> 数据结构</a></li>
<li><a class="" href="chap-data-manipulation.html"><span class="header-section-number">5</span> 数据操作</a></li>
<li><a class="" href="chap-data-transportation.html"><span class="header-section-number">6</span> 数据搬运</a></li>
<li><a class="" href="chap-graphics-foundations.html"><span class="header-section-number">7</span> 图形基础</a></li>
<li><a class="" href="chap-data-visualization.html"><span class="header-section-number">8</span> 数据可视化</a></li>
<li><a class="" href="chap-dynamic-documents.html"><span class="header-section-number">9</span> 动态文档</a></li>
<li><a class="" href="chap-interactive-web-graphics.html"><span class="header-section-number">10</span> 交互图形</a></li>
<li><a class="active" href="chap-interactive-data-tables.html"><span class="header-section-number">11</span> 交互表格</a></li>
<li><a class="" href="chap-interactive-shiny-app.html"><span class="header-section-number">12</span> 交互报表</a></li>
<li><a class="" href="chap-string-operations.html"><span class="header-section-number">13</span> 字符串操作</a></li>
<li><a class="" href="chap-regular-expressions.html"><span class="header-section-number">14</span> 正则表达式</a></li>
<li><a class="" href="chap-text-analysis.html"><span class="header-section-number">15</span> 文本分析</a></li>
<li><a class="" href="chap-sampling-distributions.html"><span class="header-section-number">16</span> 抽样分布</a></li>
<li><a class="" href="chap-parameter-estimators.html"><span class="header-section-number">17</span> 参数估计</a></li>
<li><a class="" href="chap-hypothesis-test.html"><span class="header-section-number">18</span> 假设检验</a></li>
<li><a class="" href="chap-power-Analysis.html"><span class="header-section-number">19</span> 功效分析</a></li>
<li><a class="" href="chap-experimental-design.html"><span class="header-section-number">20</span> 试验设计</a></li>
<li><a class="" href="chap-linear-models.html"><span class="header-section-number">21</span> 线性模型</a></li>
<li><a class="" href="chap-generalized-linear-models.html"><span class="header-section-number">22</span> 广义线性模型</a></li>
<li><a class="" href="chap-case-study.html"><span class="header-section-number">23</span> 案例研究</a></li>
<li><a class="" href="chap-data-explorer.html"><span class="header-section-number">24</span> 数据探索</a></li>
<li><a class="" href="chap-survival-analysis.html"><span class="header-section-number">25</span> 生存分析</a></li>
<li><a class="" href="chap-time-series-analysis.html"><span class="header-section-number">26</span> 时序分析</a></li>
<li><a class="" href="chap-spatial-analysis.html"><span class="header-section-number">27</span> 空间分析</a></li>
<li><a class="" href="chap-spatial-modeling.html"><span class="header-section-number">28</span> 空间建模</a></li>
<li><a class="" href="chap-bayesian-models.html"><span class="header-section-number">29</span> 贝叶斯模型</a></li>
<li><a class="" href="chap-gradient-boosting-machine.html"><span class="header-section-number">30</span> 梯度提升机</a></li>
<li><a class="" href="chap-neural-network.html"><span class="header-section-number">31</span> 神经网络</a></li>
<li><a class="" href="chap-matrix-operations.html"><span class="header-section-number">32</span> 矩阵运算</a></li>
<li><a class="" href="chap-symbolic-computation.html"><span class="header-section-number">33</span> 符号计算</a></li>
<li><a class="" href="chap-numerical-optimization.html"><span class="header-section-number">34</span> 数值优化</a></li>
<li class="book-part">附录</li>
<li><a class="" href="chap-linux-command-bash.html"><span class="header-section-number">A</span> 命令行操作</a></li>
<li><a class="" href="chap-other-softwares.html"><span class="header-section-number">B</span> 其它软件</a></li>
<li><a class="" href="chap-mixed-programming.html"><span class="header-section-number">C</span> 混合编程</a></li>
<li><a class="" href="chap-object-oriented-programming.html"><span class="header-section-number">D</span> 面向对象编程</a></li>
<li><a class="" href="references.html">参考文献</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/XiangyunHuang/masr">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="chap-interactive-data-tables" class="section level1" number="11">
<h1>
<span class="header-section-number">第 11 章</span> 交互表格<a class="anchor" aria-label="anchor" href="#chap-interactive-data-tables"><i class="fas fa-link"></i></a>
</h1>
<p>Greg Lin 开发的 <a href="https://github.com/glin/reactable">reactable</a> 包覆盖测试达到惊人的 99%，它基于 JavaScript 库 <a href="https://github.com/tannerlinsley/react-table">react-table</a>， 是 <a href="https://github.com/facebook/react">react</a> 框架的衍生品，Nick Raienko 整理了一份超棒的 <a href="https://github.com/enaqx/awesome-react">react 模块合集</a> 也许机智如你，可以引入更多优秀的 react 模块到 R 语言社区。<a href="https://github.com/kcuilla/reactablefmtr">reactablefmtr</a> 提供一些函数简化 reactable 定制表格的复杂性</p>
<p>谢益辉开发的 <a href="https://github.com/rstudio/DT">DT</a> 包覆盖测试 31%， 它基于 <a href="https://datatables.net/">DataTables</a> 库，是 <a href="https://jquery.com/">jQuery</a> 框架的衍生品。益辉评价 reactable 在多个方面优于 DT，比如行分组和聚合，嵌入 HTML widgets，甚至说要是 <strong>reactable</strong> 存在于 <strong>DT</strong> 之前，他就不会新开发 DT 这个 R 包了，不过这是后话了<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://bookdown.org/yihui/rmarkdown-cookbook/table-other.html" class="uri"&gt;https://bookdown.org/yihui/rmarkdown-cookbook/table-other.html&lt;/a&gt;&lt;/p&gt;'><sup>38</sup></a>。</p>
<p>Richard Iannone 开发的 <a href="https://github.com/rstudio/gt">gt</a> 包覆盖测试 78%，类似 <strong>ggplot2</strong> 的设计哲学，试图打造制作表格的语法，相比于 <strong>reactable</strong> 和 <strong>DT</strong>， 它不依赖于 JavaScript 库，更加轻量，一般来讲，持续维护更新重 JS 库依赖的 R 包比较累人，JS 库可能会不断重构，进而变动 API。</p>
<p>朱昊开发的 <a href="https://github.com/haozhu233/kableExtra">kableExtra</a> 大大扩展了 <strong>knitr</strong> 包的 <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable()</a></code> 函数的功能，虽没有覆盖测试，但中英文文档特别详细，见官网 <a href="https://haozhu233.github.io/kableExtra/" class="uri">https://haozhu233.github.io/kableExtra/</a>。</p>
<p>目前，Greg Lin、 谢益辉和 Richard Iannone 都是 RStudio 公司雇员，他们背靠开源组织和大公司，开发的这些 R 包的生命力都比较强。 <strong>gt</strong> 和 <strong>kableExtra</strong> 摆脱了 JavaScript 库的依赖，网页形式的表格可以嵌入到邮件内容中，这是一个不太引人注意的优势。<strong>kableExtra</strong> 还支持高度自定义的 LaTeX 输出，详见案例 <a href="https://github.com/XiangyunHuang/bookdown-kableExtra" class="uri">https://github.com/XiangyunHuang/bookdown-kableExtra</a>，<strong>gt</strong> 包据说未来也会支持，拭目以待吧，也许在成书之日能看到！</p>
<p>此外，还有任坤开发的 <a href="https://github.com/renkun-ken/formattable"><strong>formattable</strong></a> 和 David Gohel 开发的 <a href="https://github.com/davidgohel/flextable"><strong>flextable</strong></a> 包等，一份综合介绍见博文 <a href="https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/">How to Make Beautiful Tables in R</a>。</p>
<p><a href="https://github.com/Roche/rtables">rtables</a> 处于原型开发的阶段，针对复杂表格，有比较好的设计。<a href="https://github.com/rrprf/tablesgg">tablesgg</a> 使用 ggplot2 将表格渲染成图片。</p>
<div id="sec-dt-reactable" class="section level2" number="11.1">
<h2>
<span class="header-section-number">11.1</span> DT 和 reactable<a class="anchor" aria-label="anchor" href="#sec-dt-reactable"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/rstudio/DT">DT</a> 基于 jQuery 的 JS 库 <a href="https://datatables.net/">DataTables</a> 提供了一个 R 的封装，封装工具和许多其他基于 JS 库的 R 包一样，比如即将介绍的 <strong>reactable</strong> 包，都依赖于 <a href="https://github.com/ramnathv/htmlwidgets">htmlwidgets</a>。</p>
<div class="sourceCode" id="cb1385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb1386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">'CI'</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>R_CRAN_WEB <span class="op">=</span> <span class="st">"https://cloud.r-project.org/"</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>R_CRAN_WEB <span class="op">=</span> <span class="st">"https://mirrors.tuna.tsinghua.edu.cn/CRAN"</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">pdb</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/CRANtools.html">CRAN_package_db</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">sub_pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/subset.data.table.html">subset</a></span><span class="op">(</span><span class="va">pdb</span>, subset <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">pdb</span><span class="op">[</span>, <span class="st">"Package"</span><span class="op">]</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">pdb</span><span class="op">[</span>, <span class="st">"Package"</span><span class="op">]</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/zpackages.html">.packages</a></span><span class="op">(</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span>
<span class="va">pkg_pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/subset.data.table.html">subset</a></span><span class="op">(</span><span class="va">sub_pdb</span>,
  subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Yihui Xie"</span>, <span class="va">sub_pdb</span><span class="op">[</span>, <span class="st">"Maintainer"</span><span class="op">]</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Hadley Wickham"</span>, <span class="va">sub_pdb</span><span class="op">[</span>, <span class="st">"Maintainer"</span><span class="op">]</span><span class="op">)</span>,
  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Maintainer"</span>, <span class="st">"Package"</span>, <span class="st">"Version"</span>, <span class="st">"Published"</span>, <span class="st">"Title"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">pkg_pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/transform.data.table.html">transform</a></span><span class="op">(</span><span class="va">pkg_pdb</span>, Title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"(\\\n)"</span>, <span class="st">" "</span>, <span class="va">Title</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb1387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT">DT</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb1388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">pkg_pdb</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">pkg_pdb</span><span class="op">$</span><span class="va">Maintainer</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span>,
  rownames <span class="op">=</span> <span class="cn">F</span>, <span class="co"># 不显示行名</span>
  extensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Buttons"</span>, <span class="st">"RowGroup"</span><span class="op">)</span>,
  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    pageLength <span class="op">=</span> <span class="fl">10</span>, <span class="co"># 每页显示的行数</span>
    language <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"//cdn.datatables.net/plug-ins/1.10.11/i18n/Chinese.json"</span><span class="op">)</span>, <span class="co"># 汉化</span>
    dom <span class="op">=</span> <span class="st">"Brtp"</span>, <span class="co"># 去掉显示行数 i、过滤 f 的能力，翻页用 p 表示</span>
    ordering <span class="op">=</span> <span class="cn">F</span>, <span class="co"># 去掉列排序</span>
    buttons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"copy"</span>, <span class="st">"csv"</span>, <span class="st">"excel"</span>, <span class="st">"pdf"</span>, <span class="st">"print"</span><span class="op">)</span>, <span class="co"># 提供打印按钮</span>
    rowGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>dataSrc <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># 按 Maintainer 列分组</span>
    columnDefs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>className <span class="op">=</span> <span class="st">"dt-center"</span>, targets <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># 不显示行名，则 targets 从 0 开始，否则从 1 开始</span>
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>visible <span class="op">=</span> <span class="cn">FALSE</span>, targets <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># 不显示 Maintainer 列</span>
    <span class="op">)</span>
  <span class="op">)</span>,
  caption <span class="op">=</span> <span class="st">"谢大和哈神维护的 R 包"</span>
<span class="op">)</span></code></pre></div>
<div id="htmlwidget-ef34fbb5cfaa57e60c67" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ef34fbb5cfaa57e60c67">{"x":{"filter":"none","extensions":["Buttons","RowGroup"],"caption":"<caption>谢大和哈神维护的 R 包<\/caption>","data":[["Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Yihui Xie &lt;xie@yihui.name&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;hadley@rstudio.com&gt;","Hadley Wickham &lt;h.wickham@gmail.com&gt;"],["bookdown","DT","evaluate","formatR","highr","knitr","markdown","mime","rmarkdown","servr","tinytex","xaringan","xfun","assertthat","dbplyr","downlit","dplyr","dtplyr","ellipsis","forcats","generics","gtable","haven","httr","lazyeval","modelr","plyr","productplots","rappdirs","roxygen2","rvest","scales","stringr","testthat","tidyr","tidyverse","waldo","reshape2"],["0.23","0.18","0.14","1.11","0.9","1.33","1.1","0.11","2.10","0.23","0.33","0.22","0.25","0.2.1","2.1.1","0.2.1","1.0.7","1.1.0","0.3.2","0.5.1","0.1.0","0.3.0","2.4.3","1.4.2","0.2.2","0.1.8","1.8.6","0.1.1","0.3.3","7.1.1","1.0.1","1.1.1","1.4.0","3.0.4","1.1.3","1.3.1","0.2.5","1.4.4"],["2021-08-13","2021-04-14","2019-05-28","2021-06-01","2021-04-16","2021-04-24","2019-08-07","2021-06-23","2021-08-06","2021-08-11","2021-08-05","2021-06-23","2021-08-06","2019-03-21","2021-04-06","2020-11-04","2021-06-18","2021-02-20","2021-04-29","2021-01-27","2020-10-31","2019-03-25","2021-08-04","2020-07-20","2019-03-15","2020-05-19","2020-03-03","2016-07-02","2021-01-31","2020-06-27","2021-07-26","2020-05-11","2019-02-10","2021-07-01","2021-03-03","2021-04-15","2021-03-08","2020-04-09"],["Authoring Books and Technical Documents with R Markdown","A Wrapper of the JavaScript Library 'DataTables'","Parsing and Evaluation Tools that Provide More Details than the Default","Format R Code Automatically","Syntax Highlighting for R Source Code","A General-Purpose Package for Dynamic Report Generation in R","Render Markdown with the C Library 'Sundown'","Map Filenames to MIME Types","Dynamic Documents for R","A Simple HTTP Server to Serve Static Files or Dynamic Documents","Helper Functions to Install and Maintain TeX Live, and Compile LaTeX Documents","Presentation Ninja","Supporting Functions for Packages Maintained by 'Yihui Xie'","Easy Pre and Post Assertions","A 'dplyr' Back End for Databases","Syntax Highlighting and Automatic Linking","A Grammar of Data Manipulation","Data Table Back-End for 'dplyr'","Tools for Working with ...","Tools for Working with Categorical Variables (Factors)","Common S3 Generics not Provided by Base R Methods Related to Model Fitting","Arrange 'Grobs' in Tables","Import and Export 'SPSS', 'Stata' and 'SAS' Files","Tools for Working with URLs and HTTP","Lazy (Non-Standard) Evaluation","Modelling Functions that Work with the Pipe","Tools for Splitting, Applying and Combining Data","Product Plots for R","Application Directories: Determine Where to Save Data, Caches, and Logs","In-Line Documentation for R","Easily Harvest (Scrape) Web Pages","Scale Functions for Visualization","Simple, Consistent Wrappers for Common String Operations","Unit Testing for R","Tidy Messy Data","Easily Install and Load the 'Tidyverse'","Find Differences Between R Objects","Flexibly Reshape Data: A Reboot of the Reshape Package"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Maintainer<\/th>\n      <th>Package<\/th>\n      <th>Version<\/th>\n      <th>Published<\/th>\n      <th>Title<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"language":{"url":"//cdn.datatables.net/plug-ins/1.10.11/i18n/Chinese.json"},"dom":"Brtp","ordering":false,"buttons":["copy","csv","excel","pdf","print"],"rowGroup":{"dataSrc":0},"columnDefs":[{"className":"dt-center","targets":0},{"visible":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb1389"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">colorize_num</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="st">"green"</span>, <span class="va">x</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="st">"red"</span>, <span class="va">x</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>
<span class="va">colorize_pct</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="st">"green"</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">(</span><span class="va">x</span>, accuracy <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="st">"red"</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">(</span><span class="va">x</span>, accuracy <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">colorize_pp</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="st">"green"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">100</span><span class="op">*</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, <span class="st">"PP"</span><span class="op">)</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="st">"red"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">100</span><span class="op">*</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, <span class="st">"PP"</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">colorize_text</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">color</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"&lt;span style='color:%s'&gt;%s&lt;/span&gt;"</span>, <span class="va">color</span>, <span class="va">x</span> <span class="op">)</span>
<span class="op">}</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>

<span class="va">dat</span> <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
  <span class="op">~</span><span class="va">name1</span>, <span class="op">~</span><span class="va">name2</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="fu">b</span><span class="op">(</span><span class="st">"加粗"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">a</a></span><span class="op">(</span>href <span class="op">=</span> <span class="st">"https://rstudio.com"</span>, <span class="st">"超链"</span><span class="op">)</span><span class="op">)</span>, <span class="co"># 支持超链接</span>
  <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">em</a></span><span class="op">(</span><span class="st">"强调"</span><span class="op">)</span><span class="op">)</span>, <span class="st">'&lt;a href="#" onclick="alert(\'Hello World\');"&gt;Hello&lt;/a&gt;'</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">span</a></span><span class="op">(</span>style <span class="op">=</span> <span class="st">'color:red'</span>, <span class="st">"正常"</span><span class="op">)</span><span class="op">)</span>, <span class="st">'正常'</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>,
  escape <span class="op">=</span> <span class="cn">F</span>, <span class="co"># 设置 escape = F</span>
  colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu">colorize_text</span><span class="op">(</span><span class="st">"第1列"</span>, <span class="st">"red"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">em</a></span><span class="op">(</span><span class="st">"第2列"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
  caption <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="fu">caption</span><span class="op">(</span>
    style <span class="op">=</span> <span class="st">"caption-side: top; text-align: center;"</span>,
    <span class="st">"表格 2: "</span>, <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">em</a></span><span class="op">(</span><span class="st">"表格标题"</span><span class="op">)</span>
  <span class="op">)</span>, <span class="co"># 在表格底部显示标题，默认在表格上方显示标题</span>
  <span class="co"># filter = "top", # 过滤框</span>
  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    pageLength <span class="op">=</span> <span class="fl">5</span>, <span class="co"># 每页显示5行</span>
    dom <span class="op">=</span> <span class="st">"t"</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<div id="htmlwidget-ac015ed93bcfc048c1ac" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac015ed93bcfc048c1ac">{"x":{"filter":"none","caption":"<caption style=\"caption-side: top; text-align: center;\">\n  表格 2: \n  <em>表格标题<\/em>\n<\/caption>","data":[["1","2","3"],["<b>加粗<\/b>","<em>强调<\/em>","<span style=\"color:red\">正常<\/span>"],["<a href=\"https://rstudio.com\">超链<\/a>","<a href=\"#\" onclick=\"alert('Hello World');\">Hello<\/a>","正常"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th><span style='color:red'>第1列<\/span><\/th>\n      <th><em>第2列<\/em><\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"dom":"t","order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}],"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>下面重点介绍 reactable 包，看看 React.js 和 Shiny 是如何集成的，这是比较高级的主题，主要参考 <a href="https://github.com/alandipert">Alan Dipert</a> 的演讲材料 <a href="https://rstudio.com/resources/rstudioconf-2019/integrating-react-js-and-shiny/">Integrating React.js and Shiny</a>。</p>
<div class="sourceCode" id="cb1390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://glin.github.io/reactable/">reactable</a></span><span class="op">)</span> </code></pre></div>
<p>下面这个例子来自 React.js 官网 <a href="https://reactjs.org/" class="uri">https://reactjs.org/</a></p>
<div class="sourceCode" id="cb1391"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb1391-1"><a href="chap-interactive-data-tables.html#cb1391-1" aria-hidden="true" tabindex="-1"></a><span class="in">```js</span></span>
<span id="cb1391-2"><a href="chap-interactive-data-tables.html#cb1391-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> HelloMessage <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb1391-3"><a href="chap-interactive-data-tables.html#cb1391-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">render</span>() {</span>
<span id="cb1391-4"><a href="chap-interactive-data-tables.html#cb1391-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb1391-5"><a href="chap-interactive-data-tables.html#cb1391-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb1391-6"><a href="chap-interactive-data-tables.html#cb1391-6" aria-hidden="true" tabindex="-1"></a>        Hello {<span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">name</span>}</span>
<span id="cb1391-7"><a href="chap-interactive-data-tables.html#cb1391-7" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb1391-8"><a href="chap-interactive-data-tables.html#cb1391-8" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb1391-9"><a href="chap-interactive-data-tables.html#cb1391-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1391-10"><a href="chap-interactive-data-tables.html#cb1391-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1391-11"><a href="chap-interactive-data-tables.html#cb1391-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1391-12"><a href="chap-interactive-data-tables.html#cb1391-12" aria-hidden="true" tabindex="-1"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(</span>
<span id="cb1391-13"><a href="chap-interactive-data-tables.html#cb1391-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;</span>HelloMessage name<span class="op">=</span><span class="st">"Taylor"</span> <span class="op">/&gt;,</span></span>
<span id="cb1391-14"><a href="chap-interactive-data-tables.html#cb1391-14" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'hello-example'</span>)</span>
<span id="cb1391-15"><a href="chap-interactive-data-tables.html#cb1391-15" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb1391-16"><a href="chap-interactive-data-tables.html#cb1391-16" aria-hidden="true" tabindex="-1"></a><span class="vs">```</span></span></code></pre></div>
<p>更多细节定制见 Thomas Mock 的博文 <a href="https://themockup.blog/posts/2020-05-13-reactable-tables-the-rest-of-the-owl/">reactable - An Interactive Tables Guide</a></p>
<p>reactable 制作表格</p>
<div class="sourceCode" id="cb1392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://glin.github.io/reactable/">reactable</a></span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://glin.github.io/reactable/reference/reactable-shiny.html">reactableOutput</a></span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://glin.github.io/reactable/reference/reactable-shiny.html">renderReactable</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html">reactable</a></span><span class="op">(</span><span class="va">iris</span>,
      filterable <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># 过滤</span>
      searchable <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># 搜索</span>
      showPageSizeOptions <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># 页面大小</span>
      pageSizeOptions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span><span class="op">)</span>, <span class="co"># 页面大小可选项</span>
      defaultPageSize <span class="op">=</span> <span class="fl">10</span>, <span class="co"># 默认显示10行</span>
      highlight <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># 高亮选择</span>
      striped <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># 隔行高亮</span>
      fullWidth <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># 默认不要全宽填充，适应数据框的宽度</span>
      defaultSorted <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        Sepal.Length <span class="op">=</span> <span class="st">"asc"</span>, <span class="co"># 由小到大排序</span>
        Petal.Length <span class="op">=</span> <span class="st">"desc"</span> <span class="co"># 由大到小</span>
      <span class="op">)</span>,
      columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        Sepal.Width <span class="op">=</span> <span class="fu"><a href="https://glin.github.io/reactable/reference/colDef.html">colDef</a></span><span class="op">(</span>style <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Sepal.Width 添加颜色标记</span>
          <span class="kw">if</span> <span class="op">(</span><span class="va">value</span> <span class="op">&gt;</span> <span class="fl">3.5</span><span class="op">)</span> <span class="op">{</span>
            <span class="va">color</span> <span class="op">&lt;-</span> <span class="st">"#008000"</span>
          <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">value</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span>
            <span class="va">color</span> <span class="op">&lt;-</span> <span class="st">"#e00000"</span>
          <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
            <span class="va">color</span> <span class="op">&lt;-</span> <span class="st">"#777"</span>
          <span class="op">}</span>
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">color</span>, fontWeight <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>
        <span class="op">}</span><span class="op">)</span>

      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb1393"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 修改自 Code: https://gist.github.com/jthomasmock/f085dce3e70e42ca49b052bbe25de49f</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://glin.github.io/reactable/">reactable</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/htmltools">htmltools</a></span><span class="op">)</span>

<span class="co"># barchart function from: https://glin.github.io/reactable/articles/building-twitter-followers.html</span>
<span class="va">bar_chart</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">label</span>, <span class="va">width</span> <span class="op">=</span> <span class="st">"100%"</span>, <span class="va">height</span> <span class="op">=</span> <span class="st">"14px"</span>, <span class="va">fill</span> <span class="op">=</span> <span class="st">"#00bfc4"</span>, <span class="va">background</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">bar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>background <span class="op">=</span> <span class="va">fill</span>, width <span class="op">=</span> <span class="va">width</span>, height <span class="op">=</span> <span class="va">height</span><span class="op">)</span><span class="op">)</span>
  <span class="va">chart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>flexGrow <span class="op">=</span> <span class="fl">1</span>, marginLeft <span class="op">=</span> <span class="st">"6px"</span>, background <span class="op">=</span> <span class="va">background</span><span class="op">)</span>, <span class="va">bar</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>display <span class="op">=</span> <span class="st">"flex"</span>, alignItems <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>, <span class="va">label</span>, <span class="va">chart</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> |&gt; 
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/subset.data.table.html">subset</a></span><span class="op">(</span>select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"mpg"</span><span class="op">)</span><span class="op">)</span> |&gt;
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/subset.data.table.html">subset</a></span><span class="op">(</span>subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">6</span>, replace <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>


<span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html">reactable</a></span><span class="op">(</span>
  <span class="va">data</span>,
  defaultPageSize <span class="op">=</span> <span class="fl">20</span>,
  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    cyl <span class="op">=</span> <span class="fu"><a href="https://glin.github.io/reactable/reference/colDef.html">colDef</a></span><span class="op">(</span>align <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>,
    mpg <span class="op">=</span> <span class="fu"><a href="https://glin.github.io/reactable/reference/colDef.html">colDef</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"mpg"</span>,
      defaultSortOrder <span class="op">=</span> <span class="st">"desc"</span>,
      minWidth <span class="op">=</span> <span class="fl">250</span>,
      cell <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">value</span>, <span class="va">index</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">width</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">value</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span>, <span class="st">"%"</span><span class="op">)</span>
        <span class="va">value</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">value</span>, width <span class="op">=</span> <span class="fl">9</span>, justify <span class="op">=</span> <span class="st">"right"</span>, nsmall <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
        
        <span class="co"># output the value of another column </span>
        <span class="co"># that aligns with current value</span>
        <span class="va">cyl_val</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">cyl</span><span class="op">[</span><span class="va">index</span><span class="op">]</span>

        <span class="co"># Color based on the row's cyl value</span>
        <span class="va">color_fill</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">cyl_val</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span> <span class="op">{</span>
          <span class="st">"#3686d3"</span> <span class="co"># blue</span>
        <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">cyl_val</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="op">{</span>
          <span class="st">"#88398a"</span> <span class="co"># purple</span>
        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
          <span class="st">"#fcab27"</span> <span class="co"># orange</span>
        <span class="op">}</span>
        <span class="fu">bar_chart</span><span class="op">(</span><span class="va">value</span>, width <span class="op">=</span> <span class="va">width</span>, fill <span class="op">=</span> <span class="va">color_fill</span>, background <span class="op">=</span> <span class="st">"#e1e1e1"</span><span class="op">)</span>
      <span class="op">}</span>,
      align <span class="op">=</span> <span class="st">"left"</span>,
      style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fontFamily <span class="op">=</span> <span class="st">"monospace"</span>, whiteSpace <span class="op">=</span> <span class="st">"pre"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="sec-gt-kableExtra" class="section level2" number="11.2">
<h2>
<span class="header-section-number">11.2</span> gt 和 kableExtra<a class="anchor" aria-label="anchor" href="#sec-gt-kableExtra"><i class="fas fa-link"></i></a>
</h2>
<p>如表 <a href="chap-interactive-data-tables.html#tab:kable-styles">11.1</a> 所示，我们可以自定义表格样式，比如配色，例子修改自 kableExtra 帮助文档 <a href="https://haozhu233.github.io/kableExtra/bookdown/cross-format-tables-in-bookdown.html" class="uri">https://haozhu233.github.io/kableExtra/bookdown/cross-format-tables-in-bookdown.html</a>，同时支持 HTML 和 LaTeX 输出， 但是 LaTeX 输出需要在文档类选项中增加 table 选项，即 <code>classoption: "table"</code>，这样就可以加载 colortbl 宏包，进而提供 <code>\rowcolor</code> 等 LaTeX 命令，在表格中给每个格子定制颜色。我们推荐在 classoption 中添加 table 选项，而不是再次加载 xcolor 包，比如像这样 <code>\usepackage[table]{xcolor}</code>，这会在 R Markdown 中引起冲突 <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://stackoverflow.com/questions/50094698/rmarkdown-beamer-presentation-option-clash-clash-for-xcolor" class="uri"&gt;https://stackoverflow.com/questions/50094698/rmarkdown-beamer-presentation-option-clash-clash-for-xcolor&lt;/a&gt;&lt;/p&gt;'><sup>39</sup></a>。</p>
<div class="sourceCode" id="cb1394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span>

<span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/transform.data.table.html">transform</a></span><span class="op">(</span>
    Sepal.Length <span class="op">=</span>
      <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/cell_spec.html">cell_spec</a></span><span class="op">(</span><span class="va">Sepal.Length</span>,
        bold <span class="op">=</span> <span class="cn">T</span>,
        color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/spec_color.html">spec_color</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, end <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>,
        font_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/spec_font_size.html">spec_font_size</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span>
      <span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/transform.data.table.html">transform</a></span><span class="op">(</span>Species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/cell_spec.html">cell_spec</a></span><span class="op">(</span>
    <span class="va">Species</span>,
    color <span class="op">=</span> <span class="st">"white"</span>, bold <span class="op">=</span> <span class="cn">T</span>,
    background <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/spec_color.html">spec_color</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,
      end <span class="op">=</span> <span class="fl">0.9</span>,
      option <span class="op">=</span> <span class="st">"A"</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>
    <span class="op">)</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
    escape <span class="op">=</span> <span class="cn">F</span>, align <span class="op">=</span> <span class="st">"c"</span>, booktabs <span class="op">=</span> <span class="cn">T</span>,
    caption <span class="op">=</span> <span class="st">"自定义表格样式"</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"condensed"</span><span class="op">)</span>,
    latex_options <span class="op">=</span> <span class="st">"striped"</span>,
    full_width <span class="op">=</span> <span class="cn">F</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:kable-styles">表 11.1: </span>自定义表格样式
</caption>
<thead><tr>
<th style="text-align:center;">
Sepal.Length
</th>
<th style="text-align:center;">
Sepal.Width
</th>
<th style="text-align:center;">
Petal.Length
</th>
<th style="text-align:center;">
Petal.Width
</th>
<th style="text-align:center;">
Species
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(40, 174, 128, 1) !important;font-size: 14px;">5.1</span>
</td>
<td style="text-align:center;">
3.5
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(254, 206, 145, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(37, 131, 142, 1) !important;font-size: 12px;">4.9</span>
</td>
<td style="text-align:center;">
3.0
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(254, 160, 109, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(57, 87, 140, 1) !important;font-size: 10px;">4.7</span>
</td>
<td style="text-align:center;">
3.2
</td>
<td style="text-align:center;">
1.3
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(246, 110, 92, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(67, 62, 133, 1) !important;font-size: 10px;">4.6</span>
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(222, 73, 104, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(31, 154, 138, 1) !important;font-size: 13px;">5</span>
</td>
<td style="text-align:center;">
3.6
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(183, 55, 121, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(187, 223, 39, 1) !important;font-size: 16px;">5.4</span>
</td>
<td style="text-align:center;">
3.9
</td>
<td style="text-align:center;">
1.7
</td>
<td style="text-align:center;">
0.4
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(140, 41, 129, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(67, 62, 133, 1) !important;font-size: 10px;">4.6</span>
</td>
<td style="text-align:center;">
3.4
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.3
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(100, 26, 128, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(31, 154, 138, 1) !important;font-size: 13px;">5</span>
</td>
<td style="text-align:center;">
3.4
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(60, 15, 112, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(68, 1, 84, 1) !important;font-size: 8px;">4.4</span>
</td>
<td style="text-align:center;">
2.9
</td>
<td style="text-align:center;">
1.4
</td>
<td style="text-align:center;">
0.2
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(20, 14, 54, 1) !important;">setosa</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: rgba(37, 131, 142, 1) !important;font-size: 12px;">4.9</span>
</td>
<td style="text-align:center;">
3.1
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.1
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    color: white !important;border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: rgba(0, 0, 4, 1) !important;">setosa</span>
</td>
</tr>
</tbody>
</table></div>
<p>一个非常基本的 gt 制作的表格</p>
<div class="sourceCode" id="cb1395"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/">gt</a></span><span class="op">)</span>
<span class="va">iris</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>然后添加表格的标题和副标题，套上 <code><a href="https://gt.rstudio.com/reference/md.html">md()</a></code> 函数后，标题和副标题支持 Markdown 语法，告别 HTML 的制表方式吧！其它表格元素，如脚注支持和表格的列指标关联</p>
<div class="sourceCode" id="cb1396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>

<span class="va">iris</span> <span class="op">%&gt;%</span>
  <span class="va">as.data.table</span> <span class="op">%&gt;%</span> 
  <span class="va">.</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="fl">2</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">Species</span><span class="op">)</span><span class="op">]</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>
    title <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/md.html">md</a></span><span class="op">(</span><span class="st">"**鸢尾花**数据集"</span><span class="op">)</span>,
    subtitle <span class="op">=</span> <span class="st">"R 内置数据集"</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://gt.rstudio.com/reference/data_color.html">data_color</a></span><span class="op">(</span>
    columns <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span>,
    colors <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/col_numeric.html">col_numeric</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html">terrain.colors</a></span><span class="op">(</span><span class="fl">5</span>, rev <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, domain <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://gt.rstudio.com/reference/data_color.html">data_color</a></span><span class="op">(</span>
    columns <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span>,
    colors <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/col_numeric.html">col_factor</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html">hcl.colors</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, domain <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html">tab_footnote</a></span><span class="op">(</span>
    footnote <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/md.html">md</a></span><span class="op">(</span><span class="st">"据说数据集最早收集自 Fisher's or Anderson's"</span><span class="op">)</span>,
    locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_column_labels.html">cells_column_labels</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html">tab_footnote</a></span><span class="op">(</span>
    footnote <span class="op">=</span> <span class="st">"鸢尾花的类别"</span>,
    locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_column_labels.html">cells_column_labels</a></span><span class="op">(</span>
      columns <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>更多细节的设置见 Thomas Mock 的博文<a href="https://themockup.blog/posts/2020-05-16-gt-a-grammer-of-tables/">gt - a (G)rammar of (T)ables</a></p>
<div class="rmdnote">
<p>当前 gt 包对 LaTeX 的支持比较弱，上述表格在 HTML 网页环境中可以看到的效果并不能一一对应到 LaTeX 输出中。且 gt 包生成 LaTeX 表格会自动加载宏包 amsmath、booktabs、caption 和 longtable， <code><a href="https://gt.rstudio.com/reference/gt_latex_dependencies.html">gt_latex_dependencies()</a></code> 且不能控制</p>
</div>
</div>
<div id="sec-table-session" class="section level2" number="11.3">
<h2>
<span class="header-section-number">11.3</span> 运行环境<a class="anchor" aria-label="anchor" href="#sec-table-session"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb1397"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## R version 4.1.0 (2021-05-18)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.2 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
## LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] kableExtra_1.3.4 reactable_0.2.3  tibble_3.1.3     DT_0.18         
## [5] magrittr_2.0.1  
## 
## loaded via a namespace (and not attached):
##  [1] pillar_1.6.2      bslib_0.2.5.1     compiler_4.1.0    jquerylib_0.1.4  
##  [5] tools_4.1.0       digest_0.6.27     downlit_0.2.1     viridisLite_0.4.0
##  [9] jsonlite_1.7.2    evaluate_0.14     lifecycle_1.0.0   pkgconfig_2.0.3  
## [13] rlang_0.4.11      rstudioapi_0.13   crosstalk_1.1.1   curl_4.3.2       
## [17] yaml_2.2.1        xfun_0.25         stringr_1.4.0     httr_1.4.2       
## [21] xml2_1.3.2        knitr_1.33        systemfonts_1.0.2 fs_1.5.0         
## [25] sass_0.4.0        vctrs_0.3.8       htmlwidgets_1.5.3 webshot_0.5.2    
## [29] svglite_2.0.0     glue_1.4.2        R6_2.5.0          fansi_0.5.0      
## [33] rmarkdown_2.10    bookdown_0.23     scales_1.1.1      ellipsis_0.3.2   
## [37] htmltools_0.5.1.1 rvest_1.0.1       colorspace_2.0-2  utf8_1.2.2       
## [41] stringi_1.7.3     munsell_0.5.0     crayon_1.4.1</code></pre>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="chap-interactive-web-graphics.html"><span class="header-section-number">10</span> 交互图形</a></div>
<div class="next"><a href="chap-interactive-shiny-app.html"><span class="header-section-number">12</span> 交互报表</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#chap-interactive-data-tables"><span class="header-section-number">11</span> 交互表格</a></li>
<li><a class="nav-link" href="#sec-dt-reactable"><span class="header-section-number">11.1</span> DT 和 reactable</a></li>
<li><a class="nav-link" href="#sec-gt-kableExtra"><span class="header-section-number">11.2</span> gt 和 kableExtra</a></li>
<li><a class="nav-link" href="#sec-table-session"><span class="header-section-number">11.3</span> 运行环境</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/XiangyunHuang/masr/blob/devel/interactive-data-tables.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/XiangyunHuang/masr/edit/devel/interactive-data-tables.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>现代应用统计与 R 语言</strong>" was written by 黄湘云. It was last built on 2021-08-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
